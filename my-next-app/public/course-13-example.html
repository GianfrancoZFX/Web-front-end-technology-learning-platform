<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Next.js é«˜çº§åº”ç”¨ï¼šWakaTime ç»Ÿè®¡ä¸ Cloudflare éƒ¨ç½² - å¤ä»£å¤©æ–‡è§‚æµ‹å°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e0e0e0;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {

            0%,
            100% {
                opacity: 0.3;
            }

            50% {
                opacity: 1;
            }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
        }

        .section h2 {
            color: #ffd700;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 2px solid #ffd700;
            padding-bottom: 10px;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.2);
        }

        .feature-card h3 {
            color: #ffed4e;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .feature-card p {
            line-height: 1.6;
            opacity: 0.9;
        }

        .demo-container {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .control-panel {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn.primary {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #1a1a2e;
        }

        .btn.danger {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 5px;
        }

        .stat-label {
            opacity: 0.8;
            font-size: 0.9em;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            min-height: 300px;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .deployment-status {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4ade80;
            animation: pulse 2s infinite;
        }

        .status-indicator.warning {
            background: #fbbf24;
        }

        .status-indicator.error {
            background: #ef4444;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.5;
            }
        }

        .code-block {
            background: rgba(0, 0, 0, 0.5);
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 15px 0;
            border-left: 4px solid #ffd700;
        }

        .log-container {
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin: 15px 0;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .log-entry {
            margin: 5px 0;
            padding: 5px;
            border-radius: 4px;
        }

        .log-info {
            color: #60a5fa;
        }

        .log-success {
            color: #4ade80;
        }

        .log-warning {
            color: #fbbf24;
        }

        .log-error {
            color: #ef4444;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .metric-chart {
            width: 100%;
            height: 200px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        .chart-bar {
            position: absolute;
            bottom: 0;
            background: linear-gradient(to top, #667eea, #764ba2);
            border-radius: 4px 4px 0 0;
            transition: height 0.5s ease;
        }

        .tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            pointer-events: none;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: rgba(26, 26, 46, 0.95);
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
        }

        .close-btn {
            background: none;
            border: none;
            color: #ffd700;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .tab {
            padding: 10px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #e0e0e0;
            cursor: pointer;
            border-radius: 8px 8px 0 0;
            transition: all 0.3s ease;
        }

        .tab.active {
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
            border-bottom: 2px solid #ffd700;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 215, 0, 0.3);
            border-radius: 50%;
            border-top-color: #ffd700;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .success-message {
            background: rgba(74, 222, 128, 0.2);
            color: #4ade80;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(74, 222, 128, 0.3);
            margin: 10px 0;
        }

        .error-message {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(239, 68, 68, 0.3);
            margin: 10px 0;
        }

        .warning-message {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(251, 191, 36, 0.3);
            margin: 10px 0;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2em;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }

            .control-panel {
                flex-direction: column;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>

<body>
    <div class="stars" id="stars"></div>

    <div class="container">
        <div class="header">
            <h1>ğŸŒŸ å¤ä»£å¤©æ–‡è§‚æµ‹å°</h1>
            <p>Next.js é«˜çº§åº”ç”¨ï¼šWakaTime ç»Ÿè®¡ä¸ Cloudflare éƒ¨ç½²</p>
            <p>é€šè¿‡å¤ä»£å¤©æ–‡è§‚æµ‹çš„æ™ºæ…§ï¼Œå­¦ä¹ ç°ä»£Webåº”ç”¨çš„é«˜çº§éƒ¨ç½²ä¸ç›‘æ§æŠ€æœ¯</p>
        </div>

        <!-- WakaTime ç»Ÿè®¡æ¼”ç¤º -->
        <div class="section">
            <h2>ğŸ“Š è§‚æµ‹æ—¶é—´ç»Ÿè®¡ (WakaTime Integration)</h2>
            <p>å°±åƒå¤ä»£å¤©æ–‡å­¦å®¶è®°å½•è§‚æµ‹æ—¶é—´ä¸€æ ·ï¼ŒWakaTimeå¸®åŠ©æˆ‘ä»¬è¿½è¸ªç¼–ç¨‹æ—¶é—´å’Œæ•ˆç‡ã€‚</p>

            <div class="demo-container">
                <div class="control-panel">
                    <button class="btn primary" onclick="fetchWakaTimeData()">è·å–è§‚æµ‹æ•°æ®</button>
                    <button class="btn" onclick="generateReport()">ç”ŸæˆæŠ¥å‘Š</button>
                    <button class="btn" onclick="exportData()">å¯¼å‡ºæ•°æ®</button>
                    <button class="btn danger" onclick="clearData()">æ¸…é™¤æ•°æ®</button>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="total-time">0</div>
                        <div class="stat-label">æ€»è§‚æµ‹æ—¶é—´ (å°æ—¶)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="daily-average">0</div>
                        <div class="stat-label">æ—¥å‡è§‚æµ‹ (å°æ—¶)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="active-days">0</div>
                        <div class="stat-label">æ´»è·ƒå¤©æ•°</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="top-language">-</div>
                        <div class="stat-label">ä¸»è¦æŠ€æœ¯</div>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>ğŸ“ˆ æ¯æ—¥è§‚æµ‹æ—¶é—´è¶‹åŠ¿</h3>
                    <div class="metric-chart" id="time-chart"></div>
                </div>

                <div class="chart-container">
                    <h3>ğŸ› ï¸ æŠ€æœ¯ä½¿ç”¨åˆ†å¸ƒ</h3>
                    <div id="language-chart"></div>
                </div>
            </div>
        </div>

        <!-- Cloudflare éƒ¨ç½²æ¼”ç¤º -->
        <div class="section">
            <h2>â˜ï¸ äº‘ç«¯éƒ¨ç½²ç®¡ç† (Cloudflare Deployment)</h2>
            <p>å¦‚åŒå°†è§‚æµ‹æˆæœä¼ æ’­åˆ°å„åœ°ï¼ŒCloudflareå¸®åŠ©æˆ‘ä»¬å°†åº”ç”¨å¿«é€Ÿéƒ¨ç½²åˆ°å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹ã€‚</p>

            <div class="demo-container">
                <div class="control-panel">
                    <button class="btn primary" onclick="startDeployment()">å¼€å§‹éƒ¨ç½²</button>
                    <button class="btn" onclick="checkDeploymentStatus()">æ£€æŸ¥çŠ¶æ€</button>
                    <button class="btn" onclick="rollbackDeployment()">å›æ»šç‰ˆæœ¬</button>
                    <button class="btn danger" onclick="stopDeployment()">åœæ­¢éƒ¨ç½²</button>
                </div>

                <div class="deployment-status">
                    <div class="status-indicator" id="deployment-indicator"></div>
                    <span id="deployment-status-text">ç­‰å¾…éƒ¨ç½²</span>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="deployment-progress" style="width: 0%"></div>
                </div>

                <div class="log-container" id="deployment-logs">
                    <div class="log-entry log-info">[INFO] éƒ¨ç½²ç³»ç»Ÿå·²å°±ç»ª</div>
                    <div class="log-entry log-info">[INFO] ç­‰å¾…ç”¨æˆ·æ“ä½œ...</div>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="build-time">0</div>
                        <div class="stat-label">æ„å»ºæ—¶é—´ (ç§’)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="deploy-time">0</div>
                        <div class="stat-label">éƒ¨ç½²æ—¶é—´ (ç§’)</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="edge-locations">0</div>
                        <div class="stat-label">è¾¹ç¼˜èŠ‚ç‚¹</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="cache-hit-rate">0%</div>
                        <div class="stat-label">ç¼“å­˜å‘½ä¸­ç‡</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ€§èƒ½ç›‘æ§æ¼”ç¤º -->
        <div class="section">
            <h2>âš¡ æ€§èƒ½ç›‘æ§ (Performance Monitoring)</h2>
            <p>å¤ä»£å¤©æ–‡å­¦å®¶è§‚æµ‹å¤©è±¡å˜åŒ–ï¼Œç°ä»£å¼€å‘è€…ç›‘æ§åº”ç”¨æ€§èƒ½ã€‚</p>

            <div class="demo-container">
                <div class="control-panel">
                    <button class="btn primary" onclick="startMonitoring()">å¼€å§‹ç›‘æ§</button>
                    <button class="btn" onclick="generatePerformanceReport()">æ€§èƒ½æŠ¥å‘Š</button>
                    <button class="btn" onclick="optimizePerformance()">æ€§èƒ½ä¼˜åŒ–</button>
                    <button class="btn danger" onclick="stopMonitoring()">åœæ­¢ç›‘æ§</button>
                </div>

                <div class="tabs">
                    <button class="tab active" onclick="switchTab('metrics')">æ ¸å¿ƒæŒ‡æ ‡</button>
                    <button class="tab" onclick="switchTab('errors')">é”™è¯¯ç›‘æ§</button>
                    <button class="tab" onclick="switchTab('analytics')">ç”¨æˆ·åˆ†æ</button>
                </div>

                <div class="tab-content active" id="metrics-tab">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="response-time">0</div>
                            <div class="stat-label">å“åº”æ—¶é—´ (ms)</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="throughput">0</div>
                            <div class="stat-label">ååé‡ (req/s)</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="error-rate">0%</div>
                            <div class="stat-label">é”™è¯¯ç‡</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="uptime">99.9%</div>
                            <div class="stat-label">å¯ç”¨æ€§</div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <h3>ğŸ“Š å®æ—¶æ€§èƒ½æŒ‡æ ‡</h3>
                        <div class="metric-chart" id="performance-chart"></div>
                    </div>
                </div>

                <div class="tab-content" id="errors-tab">
                    <div class="log-container" id="error-logs">
                        <div class="log-entry log-info">[INFO] é”™è¯¯ç›‘æ§ç³»ç»Ÿå·²å¯åŠ¨</div>
                        <div class="log-entry log-success">[SUCCESS] ç³»ç»Ÿè¿è¡Œæ­£å¸¸</div>
                    </div>
                </div>

                <div class="tab-content" id="analytics-tab">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-value" id="active-users">0</div>
                            <div class="stat-label">æ´»è·ƒç”¨æˆ·</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="page-views">0</div>
                            <div class="stat-label">é¡µé¢æµè§ˆé‡</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="bounce-rate">0%</div>
                            <div class="stat-label">è·³å‡ºç‡</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value" id="session-duration">0</div>
                            <div class="stat-label">ä¼šè¯æ—¶é•¿ (åˆ†é’Ÿ)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- é«˜çº§åŠŸèƒ½æ¼”ç¤º -->
        <div class="section">
            <h2>ğŸš€ é«˜çº§åŠŸèƒ½ç‰¹æ€§</h2>
            <div class="feature-grid">
                <div class="feature-card" onclick="showFeatureDetail('edge-computing')">
                    <h3>ğŸŒ è¾¹ç¼˜è®¡ç®—</h3>
                    <p>åˆ©ç”¨Cloudflare Workersåœ¨è¾¹ç¼˜èŠ‚ç‚¹æ‰§è¡Œä»£ç ï¼Œå‡å°‘å»¶è¿Ÿï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
                </div>

                <div class="feature-card" onclick="showFeatureDetail('serverless')">
                    <h3>âš¡ æ— æœåŠ¡å™¨æ¶æ„</h3>
                    <p>åŸºäºServerless Functionsæ„å»ºå¯æ‰©å±•çš„åç«¯æœåŠ¡ï¼ŒæŒ‰éœ€ä»˜è´¹ï¼Œè‡ªåŠ¨æ‰©ç¼©å®¹ã€‚</p>
                </div>

                <div class="feature-card" onclick="showFeatureDetail('cdn')">
                    <h3>ğŸš€ å…¨çƒCDN</h3>
                    <p>é€šè¿‡Cloudflareçš„å…¨çƒCDNç½‘ç»œï¼Œå®ç°é™æ€èµ„æºçš„å¿«é€Ÿåˆ†å‘å’Œç¼“å­˜ä¼˜åŒ–ã€‚</p>
                </div>

                <div class="feature-card" onclick="showFeatureDetail('security')">
                    <h3>ğŸ›¡ï¸ å®‰å…¨é˜²æŠ¤</h3>
                    <p>é›†æˆDDoSé˜²æŠ¤ã€WAFè§„åˆ™ã€SSL/TLSåŠ å¯†ç­‰å®‰å…¨åŠŸèƒ½ï¼Œä¿éšœåº”ç”¨å®‰å…¨ã€‚</p>
                </div>

                <div class="feature-card" onclick="showFeatureDetail('analytics')">
                    <h3>ğŸ“ˆ æ·±åº¦åˆ†æ</h3>
                    <p>ç»“åˆWakaTimeå’ŒCloudflare Analyticsï¼Œè·å¾—å¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½çš„å…¨é¢æ´å¯Ÿã€‚</p>
                </div>

                <div class="feature-card" onclick="showFeatureDetail('automation')">
                    <h3>ğŸ¤– è‡ªåŠ¨åŒ–éƒ¨ç½²</h3>
                    <p>é€šè¿‡GitHub Actionså’ŒCloudflare APIå®ç°CI/CDæµæ°´çº¿ï¼Œè‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²ã€‚</p>
                </div>
            </div>
        </div>
    </div>

    <!-- æ¨¡æ€æ¡† -->
    <div class="modal" id="feature-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">åŠŸèƒ½è¯¦æƒ…</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div id="modal-body">
                <!-- åŠ¨æ€å†…å®¹ -->
            </div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // å…¨å±€å˜é‡
        let wakaTimeData = {
            totalTime: 0,
            dailyAverage: 0,
            activeDays: 0,
            topLanguage: 'JavaScript',
            dailyStats: [],
            languages: []
        };

        let deploymentStatus = {
            isDeploying: false,
            progress: 0,
            status: 'idle',
            buildTime: 0,
            deployTime: 0,
            edgeLocations: 200,
            cacheHitRate: 95
        };

        let monitoringData = {
            isMonitoring: false,
            responseTime: 0,
            throughput: 0,
            errorRate: 0,
            uptime: 99.9,
            activeUsers: 0,
            pageViews: 0,
            bounceRate: 0,
            sessionDuration: 0
        };

        // åˆå§‹åŒ–æ˜Ÿç©ºèƒŒæ™¯
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const starCount = 100;

            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 3 + 's';
                starsContainer.appendChild(star);
            }
        }

        // WakaTime æ•°æ®è·å–
        function fetchWakaTimeData() {
            const button = event.target;
            const originalText = button.textContent;
            button.innerHTML = '<div class="loading"></div> è·å–ä¸­...';
            button.disabled = true;

            setTimeout(() => {
                // æ¨¡æ‹ŸAPIå“åº”
                wakaTimeData = {
                    totalTime: Math.floor(Math.random() * 500) + 100,
                    dailyAverage: Math.floor(Math.random() * 8) + 2,
                    activeDays: Math.floor(Math.random() * 30) + 20,
                    topLanguage: ['JavaScript', 'TypeScript', 'Python', 'React'][Math.floor(Math.random() * 4)],
                    dailyStats: generateDailyStats(),
                    languages: generateLanguageStats()
                };

                updateWakaTimeDisplay();
                renderTimeChart();
                renderLanguageChart();

                button.textContent = originalText;
                button.disabled = false;

                showSuccessMessage('WakaTimeæ•°æ®è·å–æˆåŠŸï¼');
            }, 2000);
        }

        function generateDailyStats() {
            const stats = [];
            for (let i = 0; i < 30; i++) {
                stats.push({
                    date: new Date(Date.now() - (29 - i) * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    hours: Math.random() * 10 + 1
                });
            }
            return stats;
        }

        function generateLanguageStats() {
            const languages = ['JavaScript', 'TypeScript', 'CSS', 'HTML', 'Python'];
            return languages.map(lang => ({
                name: lang,
                hours: Math.random() * 50 + 10,
                percentage: Math.random() * 30 + 10
            }));
        }

        function updateWakaTimeDisplay() {
            document.getElementById('total-time').textContent = wakaTimeData.totalTime;
            document.getElementById('daily-average').textContent = wakaTimeData.dailyAverage.toFixed(1);
            document.getElementById('active-days').textContent = wakaTimeData.activeDays;
            document.getElementById('top-language').textContent = wakaTimeData.topLanguage;
        }

        function renderTimeChart() {
            const chart = document.getElementById('time-chart');
            chart.innerHTML = '';

            const maxHours = Math.max(...wakaTimeData.dailyStats.map(d => d.hours));

            wakaTimeData.dailyStats.forEach((day, index) => {
                const bar = document.createElement('div');
                bar.className = 'chart-bar';
                bar.style.left = (index * (100 / wakaTimeData.dailyStats.length)) + '%';
                bar.style.width = (100 / wakaTimeData.dailyStats.length) - 1 + '%';
                bar.style.height = (day.hours / maxHours) * 100 + '%';

                bar.addEventListener('mouseenter', (e) => {
                    showTooltip(e, `${day.date}: ${day.hours.toFixed(1)}å°æ—¶`);
                });

                bar.addEventListener('mouseleave', hideTooltip);

                chart.appendChild(bar);
            });
        }

        function renderLanguageChart() {
            const container = document.getElementById('language-chart');
            const total = wakaTimeData.languages.reduce((sum, lang) => sum + lang.hours, 0);

            container.innerHTML = wakaTimeData.languages.map(lang => {
                const percentage = (lang.hours / total) * 100;
                return `
                    <div style="display: flex; align-items: center; margin: 10px 0;">
                        <div style="width: 100px; font-size: 14px;">${lang.name}</div>
                        <div style="flex: 1; background: rgba(255,255,255,0.1); height: 20px; border-radius: 10px; margin: 0 10px; overflow: hidden;">
                            <div style="width: ${percentage}%; height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); border-radius: 10px;"></div>
                        </div>
                        <div style="width: 60px; text-align: right; font-size: 12px;">${lang.hours.toFixed(1)}h</div>
                    </div>
                `;
            }).join('');
        }

        // éƒ¨ç½²ç®¡ç†
        function startDeployment() {
            if (deploymentStatus.isDeploying) {
                showWarningMessage('éƒ¨ç½²æ­£åœ¨è¿›è¡Œä¸­ï¼Œè¯·ç­‰å¾…å®Œæˆ');
                return;
            }

            deploymentStatus.isDeploying = true;
            deploymentStatus.progress = 0;
            deploymentStatus.status = 'building';

            updateDeploymentStatus('æ­£åœ¨æ„å»º...', 'warning');
            addDeploymentLog('å¼€å§‹æ„å»ºåº”ç”¨...', 'info');

            const buildInterval = setInterval(() => {
                deploymentStatus.progress += Math.random() * 10;

                if (deploymentStatus.progress >= 50 && deploymentStatus.status === 'building') {
                    deploymentStatus.status = 'deploying';
                    updateDeploymentStatus('æ­£åœ¨éƒ¨ç½²...', 'warning');
                    addDeploymentLog('æ„å»ºå®Œæˆï¼Œå¼€å§‹éƒ¨ç½²...', 'success');
                }

                if (deploymentStatus.progress >= 100) {
                    deploymentStatus.progress = 100;
                    deploymentStatus.status = 'deployed';
                    deploymentStatus.isDeploying = false;

                    updateDeploymentStatus('éƒ¨ç½²æˆåŠŸ', 'success');
                    addDeploymentLog('éƒ¨ç½²å®Œæˆï¼åº”ç”¨å·²ä¸Šçº¿', 'success');

                    // æ›´æ–°ç»Ÿè®¡æ•°æ®
                    deploymentStatus.buildTime = Math.floor(Math.random() * 60) + 30;
                    deploymentStatus.deployTime = Math.floor(Math.random() * 30) + 10;
                    updateDeploymentStats();

                    clearInterval(buildInterval);
                    showSuccessMessage('åº”ç”¨éƒ¨ç½²æˆåŠŸï¼');
                }

                updateProgressBar(deploymentStatus.progress);
            }, 500);
        }

        function updateDeploymentStatus(text, type) {
            document.getElementById('deployment-status-text').textContent = text;
            const indicator = document.getElementById('deployment-indicator');
            indicator.className = `status-indicator ${type}`;
        }

        function updateProgressBar(progress) {
            document.getElementById('deployment-progress').style.width = progress + '%';
        }

        function addDeploymentLog(message, type) {
            const logs = document.getElementById('deployment-logs');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            logs.appendChild(logEntry);
            logs.scrollTop = logs.scrollHeight;
        }

        function updateDeploymentStats() {
            document.getElementById('build-time').textContent = deploymentStatus.buildTime;
            document.getElementById('deploy-time').textContent = deploymentStatus.deployTime;
            document.getElementById('edge-locations').textContent = deploymentStatus.edgeLocations;
            document.getElementById('cache-hit-rate').textContent = deploymentStatus.cacheHitRate + '%';
        }

        function checkDeploymentStatus() {
            if (deploymentStatus.isDeploying) {
                showWarningMessage(`éƒ¨ç½²è¿›è¡Œä¸­... è¿›åº¦: ${Math.floor(deploymentStatus.progress)}%`);
            } else if (deploymentStatus.status === 'deployed') {
                showSuccessMessage('åº”ç”¨è¿è¡Œæ­£å¸¸ï¼Œæ‰€æœ‰æœåŠ¡å¯ç”¨');
            } else {
                showWarningMessage('æš‚æ— æ´»è·ƒéƒ¨ç½²');
            }
        }

        function rollbackDeployment() {
            if (deploymentStatus.isDeploying) {
                showErrorMessage('æ— æ³•åœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­æ‰§è¡Œå›æ»š');
                return;
            }

            addDeploymentLog('å¼€å§‹å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬...', 'warning');
            setTimeout(() => {
                addDeploymentLog('å›æ»šå®Œæˆ', 'success');
                showSuccessMessage('å·²å›æ»šåˆ°ä¸Šä¸€ç‰ˆæœ¬');
            }, 2000);
        }

        function stopDeployment() {
            if (!deploymentStatus.isDeploying) {
                showWarningMessage('å½“å‰æ²¡æœ‰æ­£åœ¨è¿›è¡Œçš„éƒ¨ç½²');
                return;
            }

            deploymentStatus.isDeploying = false;
            deploymentStatus.status = 'stopped';
            updateDeploymentStatus('éƒ¨ç½²å·²åœæ­¢', 'error');
            addDeploymentLog('éƒ¨ç½²è¢«ç”¨æˆ·åœæ­¢', 'error');
            showErrorMessage('éƒ¨ç½²å·²åœæ­¢');
        }

        // æ€§èƒ½ç›‘æ§
        function startMonitoring() {
            if (monitoringData.isMonitoring) {
                showWarningMessage('ç›‘æ§å·²åœ¨è¿è¡Œä¸­');
                return;
            }

            monitoringData.isMonitoring = true;
            showSuccessMessage('æ€§èƒ½ç›‘æ§å·²å¯åŠ¨');

            const monitoringInterval = setInterval(() => {
                if (!monitoringData.isMonitoring) {
                    clearInterval(monitoringInterval);
                    return;
                }

                // æ›´æ–°å®æ—¶æ•°æ®
                monitoringData.responseTime = Math.floor(Math.random() * 200) + 50;
                monitoringData.throughput = Math.floor(Math.random() * 1000) + 100;
                monitoringData.errorRate = Math.random() * 2;
                monitoringData.activeUsers = Math.floor(Math.random() * 500) + 50;
                monitoringData.pageViews = Math.floor(Math.random() * 10000) + 1000;
                monitoringData.bounceRate = Math.random() * 30 + 20;
                monitoringData.sessionDuration = Math.random() * 10 + 2;

                updateMonitoringDisplay();

                // éšæœºç”Ÿæˆé”™è¯¯æ—¥å¿—
                if (Math.random() < 0.1) {
                    addErrorLog('æ£€æµ‹åˆ°è½»å¾®æ€§èƒ½æ³¢åŠ¨', 'warning');
                }
            }, 2000);
        }

        function updateMonitoringDisplay() {
            document.getElementById('response-time').textContent = monitoringData.responseTime;
            document.getElementById('throughput').textContent = monitoringData.throughput;
            document.getElementById('error-rate').textContent = monitoringData.errorRate.toFixed(2) + '%';
            document.getElementById('uptime').textContent = monitoringData.uptime + '%';
            document.getElementById('active-users').textContent = monitoringData.activeUsers;
            document.getElementById('page-views').textContent = monitoringData.pageViews.toLocaleString();
            document.getElementById('bounce-rate').textContent = monitoringData.bounceRate.toFixed(1) + '%';
            document.getElementById('session-duration').textContent = monitoringData.sessionDuration.toFixed(1);
        }

        function addErrorLog(message, type) {
            const logs = document.getElementById('error-logs');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.textContent = `[${timestamp}] ${message}`;
            logs.appendChild(logEntry);
            logs.scrollTop = logs.scrollHeight;
        }

        function generatePerformanceReport() {
            showSuccessMessage('æ€§èƒ½æŠ¥å‘Šå·²ç”Ÿæˆå¹¶å‘é€åˆ°æ‚¨çš„é‚®ç®±');
        }

        function optimizePerformance() {
            showSuccessMessage('æ€§èƒ½ä¼˜åŒ–å»ºè®®å·²åº”ç”¨ï¼Œé¢„è®¡å“åº”æ—¶é—´å‡å°‘15%');
        }

        function stopMonitoring() {
            monitoringData.isMonitoring = false;
            showWarningMessage('æ€§èƒ½ç›‘æ§å·²åœæ­¢');
        }

        // æ ‡ç­¾é¡µåˆ‡æ¢
        function switchTab(tabName) {
            // ç§»é™¤æ‰€æœ‰æ´»è·ƒçŠ¶æ€
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // æ¿€æ´»é€‰ä¸­çš„æ ‡ç­¾é¡µ
            event.target.classList.add('active');
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        // åŠŸèƒ½è¯¦æƒ…æ¨¡æ€æ¡†
        function showFeatureDetail(feature) {
            const modal = document.getElementById('feature-modal');
            const title = document.getElementById('modal-title');
            const body = document.getElementById('modal-body');

            const features = {
                'edge-computing': {
                    title: 'ğŸŒ è¾¹ç¼˜è®¡ç®—',
                    content: `
                        <h4>Cloudflare Workers è¾¹ç¼˜è®¡ç®—</h4>
                        <p>åœ¨å…¨çƒ200+æ•°æ®ä¸­å¿ƒè¿è¡ŒJavaScriptä»£ç ï¼Œå®ç°è¶…ä½å»¶è¿Ÿå“åº”ã€‚</p>
                        
                        <div class="code-block">
// Cloudflare Worker ç¤ºä¾‹
export default {
  async fetch(request) {
    const url = new URL(request.url);
    
    // è¾¹ç¼˜ç¼“å­˜é€»è¾‘
    if (url.pathname === '/api/data') {
      const cache = caches.default;
      const cacheKey = new Request(url.toString());
      
      let response = await cache.match(cacheKey);
      if (!response) {
        response = await fetch(request);
        await cache.put(cacheKey, response.clone());
      }
      
      return response;
    }
    
    return fetch(request);
  }
}
                        </div>
                        
                        <h4>ä¼˜åŠ¿ç‰¹ç‚¹ï¼š</h4>
                        <ul>
                            <li>å…¨çƒåˆ†å¸ƒå¼æ‰§è¡Œ</li>
                            <li>é›¶å†·å¯åŠ¨æ—¶é—´</li>
                            <li>è‡ªåŠ¨æ‰©ç¼©å®¹</li>
                            <li>å†…ç½®å®‰å…¨é˜²æŠ¤</li>
                        </ul>
                    `
                },
                'serverless': {
                    title: 'âš¡ æ— æœåŠ¡å™¨æ¶æ„',
                    content: `
                        <h4>Serverless Functions æ¶æ„</h4>
                        <p>åŸºäºäº‹ä»¶é©±åŠ¨çš„æ— æœåŠ¡å™¨è®¡ç®—æ¨¡å¼ï¼ŒæŒ‰éœ€æ‰§è¡Œï¼ŒæŒ‰ä½¿ç”¨ä»˜è´¹ã€‚</p>
                        
                        <div class="code-block">
// Next.js API Route ç¤ºä¾‹
export default async function handler(req, res) {
  if (req.method === 'POST') {
    try {
      const data = await processData(req.body);
      res.status(200).json({ success: true, data });
    } catch (error) {
      res.status(500).json({ error: error.message });
    }
  } else {
    res.setHeader('Allow', ['POST']);
    res.status(405).end('Method Not Allowed');
  }
}
                        </div>
                        
                        <h4>æ¶æ„ä¼˜åŠ¿ï¼š</h4>
                        <ul>
                            <li>æ— éœ€æœåŠ¡å™¨ç®¡ç†</li>
                            <li>è‡ªåŠ¨æ‰©ç¼©å®¹</li>
                            <li>æˆæœ¬æ•ˆç›Šé«˜</li>
                            <li>é«˜å¯ç”¨æ€§</li>
                        </ul>
                    `
                },
                'cdn': {
                    title: 'ğŸš€ å…¨çƒCDN',
                    content: `
                        <h4>Cloudflare CDN ç½‘ç»œ</h4>
                        <p>åˆ©ç”¨å…¨çƒè¾¹ç¼˜ç½‘ç»œåŠ é€Ÿé™æ€èµ„æºåˆ†å‘ï¼Œæå‡ç”¨æˆ·è®¿é—®ä½“éªŒã€‚</p>
                        
                        <div class="code-block">
// next.config.js CDN é…ç½®
module.exports = {
  images: {
    domains: ['cdn.example.com'],
    loader: 'cloudflare',
    path: 'https://cdn.example.com/'
  },
  
  async headers() {
    return [
      {
        source: '/static/(.*)',
        headers: [
          {
            key: 'Cache-Control',
            value: 'public, max-age=31536000, immutable'
          }
        ]
      }
    ];
  }
};
                        </div>
                        
                        <h4>æ€§èƒ½æå‡ï¼š</h4>
                        <ul>
                            <li>å…¨çƒç¼“å­˜èŠ‚ç‚¹</li>
                            <li>æ™ºèƒ½è·¯ç”±ä¼˜åŒ–</li>
                            <li>å‹ç¼©å’Œä¼˜åŒ–</li>
                            <li>HTTP/3 æ”¯æŒ</li>
                        </ul>
                    `
                },
                'security': {
                    title: 'ğŸ›¡ï¸ å®‰å…¨é˜²æŠ¤',
                    content: `
                        <h4>å¤šå±‚å®‰å…¨é˜²æŠ¤ä½“ç³»</h4>
                        <p>é›†æˆDDoSé˜²æŠ¤ã€WAFã€SSL/TLSç­‰å®‰å…¨åŠŸèƒ½ï¼Œå…¨æ–¹ä½ä¿æŠ¤åº”ç”¨å®‰å…¨ã€‚</p>
                        
                        <div class="code-block">
// å®‰å…¨é…ç½®ç¤ºä¾‹
const securityHeaders = {
  'Content-Security-Policy': "default-src 'self'",
  'X-Frame-Options': 'DENY',
  'X-Content-Type-Options': 'nosniff',
  'Referrer-Policy': 'strict-origin-when-cross-origin',
  'Strict-Transport-Security': 'max-age=31536000'
};

export default function handler(req, res) {
  Object.entries(securityHeaders).forEach(([key, value]) => {
    res.setHeader(key, value);
  });
  
  // ä¸šåŠ¡é€»è¾‘
}
                        </div>
                        
                        <h4>å®‰å…¨ç‰¹æ€§ï¼š</h4>
                        <ul>
                            <li>DDoS æ”»å‡»é˜²æŠ¤</li>
                            <li>Web åº”ç”¨é˜²ç«å¢™</li>
                            <li>SSL/TLS åŠ å¯†</li>
                            <li>è®¿é—®æ§åˆ¶è§„åˆ™</li>
                        </ul>
                    `
                },
                'analytics': {
                    title: 'ğŸ“ˆ æ·±åº¦åˆ†æ',
                    content: `
                        <h4>å…¨æ–¹ä½æ•°æ®åˆ†æ</h4>
                        <p>ç»“åˆå¼€å‘æ•ˆç‡å’Œåº”ç”¨æ€§èƒ½æ•°æ®ï¼Œæä¾›æ·±åº¦æ´å¯Ÿå’Œä¼˜åŒ–å»ºè®®ã€‚</p>
                        
                        <div class="code-block">
// åˆ†ææ•°æ®æ”¶é›†
const analytics = {
  // WakaTime å¼€å‘æ•°æ®
  development: {
    codingTime: '8.5h',
    productivity: '85%',
    languages: ['TypeScript', 'React']
  },
  
  // Cloudflare æ€§èƒ½æ•°æ®
  performance: {
    responseTime: '120ms',
    cacheHitRate: '95%',
    bandwidth: '2.3GB'
  },
  
  // ç”¨æˆ·è¡Œä¸ºæ•°æ®
  userBehavior: {
    pageViews: 15420,
    uniqueVisitors: 3240,
    bounceRate: '25%'
  }
};
                        </div>
                        
                        <h4>åˆ†æç»´åº¦ï¼š</h4>
                        <ul>
                            <li>å¼€å‘æ•ˆç‡è¿½è¸ª</li>
                            <li>æ€§èƒ½æŒ‡æ ‡ç›‘æ§</li>
                            <li>ç”¨æˆ·è¡Œä¸ºåˆ†æ</li>
                            <li>æˆæœ¬æ•ˆç›Šè¯„ä¼°</li>
                        </ul>
                    `
                },
                'automation': {
                    title: 'ğŸ¤– è‡ªåŠ¨åŒ–éƒ¨ç½²',
                    content: `
                        <h4>CI/CD è‡ªåŠ¨åŒ–æµæ°´çº¿</h4>
                        <p>é€šè¿‡GitHub Actionså’ŒCloudflare APIå®ç°ä»ä»£ç æäº¤åˆ°ç”Ÿäº§éƒ¨ç½²çš„å…¨è‡ªåŠ¨åŒ–ã€‚</p>
                        
                        <div class="code-block">
# .github/workflows/deploy.yml
name: Deploy to Cloudflare

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Setup Node.js
        uses: actions/setup-node@v2
        with:
          node-version: '18'
          
      - name: Install dependencies
        run: npm ci
        
      - name: Build application
        run: npm run build
        
      - name: Deploy to Cloudflare
        uses: cloudflare/wrangler-action@2.0.0
        with:
          apiToken: ${{ secrets.CF_API_TOKEN }}
          command: pages publish dist
                        </div>
                        
                        <h4>è‡ªåŠ¨åŒ–ç‰¹æ€§ï¼š</h4>
                        <ul>
                            <li>ä»£ç è´¨é‡æ£€æŸ¥</li>
                            <li>è‡ªåŠ¨åŒ–æµ‹è¯•</li>
                            <li>æ„å»ºä¼˜åŒ–</li>
                            <li>é›¶åœæœºéƒ¨ç½²</li>
                        </ul>
                    `
                }
            };

            const feature = features[feature] || { title: 'åŠŸèƒ½è¯¦æƒ…', content: 'æš‚æ— è¯¦ç»†ä¿¡æ¯' };
            title.textContent = feature.title;
            body.innerHTML = feature.content;

            modal.classList.add('show');
        }

        function closeModal() {
            document.getElementById('feature-modal').classList.remove('show');
        }

        // å·¥å…·å‡½æ•°
        function generateReport() {
            showSuccessMessage('WakaTime æŠ¥å‘Šå·²ç”Ÿæˆå¹¶ä¿å­˜åˆ°æœ¬åœ°');
        }

        function exportData() {
            showSuccessMessage('æ•°æ®å·²å¯¼å‡ºä¸º CSV æ ¼å¼');
        }

        function clearData() {
            wakaTimeData = {
                totalTime: 0,
                dailyAverage: 0,
                activeDays: 0,
                topLanguage: '-',
                dailyStats: [],
                languages: []
            };

            updateWakaTimeDisplay();
            document.getElementById('time-chart').innerHTML = '';
            document.getElementById('language-chart').innerHTML = '';

            showWarningMessage('æ‰€æœ‰æ•°æ®å·²æ¸…é™¤');
        }

        function showTooltip(event, text) {
            const tooltip = document.getElementById('tooltip');
            tooltip.textContent = text;
            tooltip.style.left = event.pageX + 10 + 'px';
            tooltip.style.top = event.pageY - 30 + 'px';
            tooltip.style.opacity = '1';
        }

        function hideTooltip() {
            document.getElementById('tooltip').style.opacity = '0';
        }

        function showSuccessMessage(message) {
            showMessage(message, 'success');
        }

        function showWarningMessage(message) {
            showMessage(message, 'warning');
        }

        function showErrorMessage(message) {
            showMessage(message, 'error');
        }

        function showMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `${type}-message`;
            messageDiv.textContent = message;
            messageDiv.style.position = 'fixed';
            messageDiv.style.top = '20px';
            messageDiv.style.right = '20px';
            messageDiv.style.zIndex = '10000';
            messageDiv.style.maxWidth = '300px';

            document.body.appendChild(messageDiv);

            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function () {
            createStars();
            updateDeploymentStats();

            // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
            document.getElementById('feature-modal').addEventListener('click', function (event) {
                if (event.target === this) {
                    closeModal();
                }
            });
        });
    </script>
</body>

</html>