<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reactæ¡†æ¶å®ä¾‹ - å¤ä»£ä¹¦é™¢ç®¡ç†ç³»ç»Ÿ</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            font-family: "Microsoft YaHei", Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            min-height: 100vh;
            color: #2d3436;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        h1 {
            color: #2d3436;
            text-align: center;
            border-bottom: 3px solid #0984e3;
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-size: 2.8em;
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .academy-header {
            background: linear-gradient(45deg, #0984e3, #74b9ff, #00b894, #00cec9);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
            color: white;
            padding: 25px;
            text-align: center;
            border-radius: 15px;
            margin: 20px 0;
            font-weight: bold;
            font-size: 1.4em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .component-demo {
            background: linear-gradient(135deg, #0984e3, #74b9ff);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .state-demo {
            background: linear-gradient(135deg, #00b894, #00cec9);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .props-demo {
            background: linear-gradient(135deg, #e17055, #d63031);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .lifecycle-demo {
            background: linear-gradient(135deg, #fdcb6e, #e84393);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .hooks-demo {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .react-app {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            min-height: 300px;
        }

        .student-card {
            background: rgba(255, 255, 255, 0.9);
            color: #2d3436;
            padding: 15px;
            border-radius: 10px;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .student-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        .student-card.selected {
            border: 2px solid #0984e3;
            background: rgba(116, 185, 255, 0.1);
        }

        .course-card {
            background: rgba(255, 255, 255, 0.9);
            color: #2d3436;
            padding: 15px;
            border-radius: 10px;
            margin: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .course-card:hover {
            transform: scale(1.02);
        }

        .btn {
            background: linear-gradient(135deg, #0984e3, #74b9ff);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(9, 132, 227, 0.4);
        }

        .btn.success {
            background: linear-gradient(135deg, #00b894, #00cec9);
        }

        .btn.warning {
            background: linear-gradient(135deg, #fdcb6e, #e84393);
        }

        .btn.danger {
            background: linear-gradient(135deg, #e17055, #d63031);
        }

        .btn.purple {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
        }

        .control-panel {
            background: #ddd;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }

        .code-display {
            background: #2d3436;
            color: #ddd;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
            font-size: 0.9em;
            white-space: pre-wrap;
        }

        .knowledge-point {
            background: #f8f9fa;
            border-left: 4px solid #0984e3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
        }

        .cultural-info {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            text-align: center;
        }

        .section-title {
            color: #0984e3;
            margin-top: 40px;
            padding-left: 15px;
            border-left: 5px solid #0984e3;
            font-size: 1.5em;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #fdcb6e;
        }

        .input-field {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-size: 1em;
            margin: 5px 0;
            background: rgba(255, 255, 255, 0.9);
        }

        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #fff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .lifecycle-stage {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 10px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .lifecycle-stage:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .lifecycle-stage.active {
            background: rgba(255, 255, 255, 0.4);
            border: 2px solid #fdcb6e;
            transform: scale(1.05);
        }

        .hook-example {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .hook-example:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(10px);
        }

        .react-keyword {
            color: #61dafb;
            font-weight: bold;
        }

        .jsx-tag {
            color: #e06c75;
        }

        .jsx-attr {
            color: #d19a66;
        }

        .jsx-string {
            color: #98c379;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Reactæ¡†æ¶å®ä¾‹ - å¤ä»£ä¹¦é™¢ç®¡ç†ç³»ç»Ÿ</h1>

        <div class="academy-header">
            ğŸ« æ¢ç´¢å¤ä»£ä¹¦é™¢æ•™è‚²ä¸ç°ä»£Reactç»„ä»¶åŒ–å¼€å‘ ğŸ«
        </div>

        <div class="knowledge-point">
            <strong>å­¦ä¹ é‡ç‚¹ï¼š</strong>æœ¬é¡µé¢å±•ç¤ºReactçš„ç»„ä»¶åŒ–å¼€å‘ã€çŠ¶æ€ç®¡ç†ã€å±æ€§ä¼ é€’ã€ç”Ÿå‘½å‘¨æœŸå’ŒHooksçš„ä½¿ç”¨
        </div>

        <h2 class="section-title">ğŸ§© ç»„ä»¶åŒ–å¼€å‘ - ä¹¦é™¢ç»„ç»‡ç»“æ„</h2>
        <div class="component-demo">
            <h4>ğŸ›ï¸ Reactç»„ä»¶å±‚æ¬¡ç»“æ„</h4>
            <div class="react-app" id="componentApp">
                <!-- Reactç»„ä»¶å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
            </div>
            <div class="control-panel">
                <button class="btn" onclick="showFunctionComponent()">å‡½æ•°ç»„ä»¶</button>
                <button class="btn success" onclick="showClassComponent()">ç±»ç»„ä»¶</button>
                <button class="btn warning" onclick="showComponentTree()">ç»„ä»¶æ ‘</button>
                <button class="btn purple" onclick="showJSXExample()">JSXè¯­æ³•</button>
            </div>
            <div class="code-display" id="componentCode" style="display: none;"></div>
            <button class="btn" onclick="toggleCode('componentCode')">æŸ¥çœ‹ç»„ä»¶ä»£ç </button>
        </div>

        <h2 class="section-title">ğŸ”„ çŠ¶æ€ç®¡ç† - ä¹¦é™¢åŠ¨æ€ä¿¡æ¯</h2>
        <div class="state-demo">
            <h4>ğŸ“Š ReactçŠ¶æ€ç®¡ç†æ¼”ç¤º</h4>
            <div class="react-app" id="stateApp">
                <!-- ReactçŠ¶æ€ç®¡ç†ç»„ä»¶å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
            </div>
            <div class="control-panel">
                <button class="btn" onclick="demonstrateState()">çŠ¶æ€æ¼”ç¤º</button>
                <button class="btn success" onclick="showStateUpdate()">çŠ¶æ€æ›´æ–°</button>
                <button class="btn warning" onclick="showStateLifting()">çŠ¶æ€æå‡</button>
                <button class="btn danger" onclick="resetState()">é‡ç½®çŠ¶æ€</button>
            </div>
            <div class="code-display" id="stateCode" style="display: none;"></div>
            <button class="btn" onclick="toggleCode('stateCode')">æŸ¥çœ‹çŠ¶æ€ä»£ç </button>
        </div>

        <h2 class="section-title">ğŸ“¤ å±æ€§ä¼ é€’ - å¸ˆç”Ÿä¿¡æ¯äº¤æµ</h2>
        <div class="props-demo">
            <h4>ğŸ“‹ Propså±æ€§ä¼ é€’ç³»ç»Ÿ</h4>
            <div class="react-app" id="propsApp">
                <!-- React Propsæ¼”ç¤ºç»„ä»¶å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
            </div>
            <div class="control-panel">
                <button class="btn" onclick="showPropsFlow()">å±æ€§æµåŠ¨</button>
                <button class="btn success" onclick="showDefaultProps()">é»˜è®¤å±æ€§</button>
                <button class="btn warning" onclick="showPropTypes()">å±æ€§éªŒè¯</button>
                <button class="btn purple" onclick="showChildrenProps()">å­ç»„ä»¶å±æ€§</button>
            </div>
            <div class="code-display" id="propsCode" style="display: none;"></div>
            <button class="btn" onclick="toggleCode('propsCode')">æŸ¥çœ‹å±æ€§ä»£ç </button>
        </div>

        <h2 class="section-title">ğŸ”„ ç”Ÿå‘½å‘¨æœŸ - å­¦æœŸç®¡ç†æµç¨‹</h2>
        <div class="lifecycle-demo">
            <h4>â° Reactç»„ä»¶ç”Ÿå‘½å‘¨æœŸ</h4>
            <div class="stats-grid">
                <div class="lifecycle-stage" onclick="showLifecycleStage('mounting')">
                    <div class="stat-number">ğŸŒ±</div>
                    <div>æŒ‚è½½é˜¶æ®µ</div>
                </div>
                <div class="lifecycle-stage" onclick="showLifecycleStage('updating')">
                    <div class="stat-number">ğŸ”„</div>
                    <div>æ›´æ–°é˜¶æ®µ</div>
                </div>
                <div class="lifecycle-stage" onclick="showLifecycleStage('unmounting')">
                    <div class="stat-number">ğŸ‚</div>
                    <div>å¸è½½é˜¶æ®µ</div>
                </div>
                <div class="lifecycle-stage" onclick="showLifecycleStage('error')">
                    <div class="stat-number">âš ï¸</div>
                    <div>é”™è¯¯å¤„ç†</div>
                </div>
            </div>
            <div class="react-app" id="lifecycleApp">
                <!-- ç”Ÿå‘½å‘¨æœŸæ¼”ç¤ºç»„ä»¶å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
            </div>
            <div class="control-panel">
                <button class="btn" onclick="mountComponent()">æŒ‚è½½ç»„ä»¶</button>
                <button class="btn warning" onclick="updateComponent()">æ›´æ–°ç»„ä»¶</button>
                <button class="btn danger" onclick="unmountComponent()">å¸è½½ç»„ä»¶</button>
            </div>
            <div class="code-display" id="lifecycleCode" style="display: none;"></div>
            <button class="btn" onclick="toggleCode('lifecycleCode')">æŸ¥çœ‹ç”Ÿå‘½å‘¨æœŸä»£ç </button>
        </div>

        <h2 class="section-title">ğŸ£ React Hooks - ç°ä»£ä¹¦é™¢ç®¡ç†</h2>
        <div class="hooks-demo">
            <h4>ğŸ”§ React Hooksæ¼”ç¤º</h4>
            <div class="hook-example" onclick="showHookExample('useState')">
                useState - çŠ¶æ€é’©å­ ğŸ”„
            </div>
            <div class="hook-example" onclick="showHookExample('useEffect')">
                useEffect - å‰¯ä½œç”¨é’©å­ âš¡
            </div>
            <div class="hook-example" onclick="showHookExample('useContext')">
                useContext - ä¸Šä¸‹æ–‡é’©å­ ğŸŒ
            </div>
            <div class="hook-example" onclick="showHookExample('useReducer')">
                useReducer - å¤æ‚çŠ¶æ€é’©å­ ğŸ—ï¸
            </div>
            <div class="hook-example" onclick="showHookExample('useMemo')">
                useMemo - è®°å¿†åŒ–é’©å­ ğŸ’¾
            </div>
            <div class="hook-example" onclick="showHookExample('useCallback')">
                useCallback - å›è°ƒé’©å­ ğŸ“
            </div>
            <div class="react-app" id="hooksApp">
                <!-- Hooksæ¼”ç¤ºç»„ä»¶å°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
            </div>
            <div class="control-panel">
                <button class="btn" onclick="demonstrateHooks()">Hooksæ¼”ç¤º</button>
                <button class="btn success" onclick="showCustomHook()">è‡ªå®šä¹‰Hook</button>
                <button class="btn warning" onclick="showHookRules()">Hookè§„åˆ™</button>
            </div>
            <div class="code-display" id="hooksCode" style="display: none;"></div>
            <button class="btn" onclick="toggleCode('hooksCode')">æŸ¥çœ‹Hooksä»£ç </button>
        </div>

        <div class="cultural-info">
            <h3>ğŸ« ä¸­å›½å¤ä»£ä¹¦é™¢æ–‡åŒ–</h3>
            <p><strong>ä¹¦é™¢åˆ¶åº¦ï¼š</strong>ä¸­å›½å¤ä»£é‡è¦çš„æ•™è‚²æœºæ„ï¼Œå¦‚å²³éº“ä¹¦é™¢ã€ç™½é¹¿æ´ä¹¦é™¢ç­‰ã€‚</p>
            <p><strong>å¸ˆç”Ÿå…³ç³»ï¼š</strong>å¼ºè°ƒå¸ˆé“å°Šä¸¥å’Œå› ææ–½æ•™ï¼Œä½“ç°äº†è‰¯å¥½çš„æ•™è‚²ä¼ ç»Ÿã€‚</p>
            <p><strong>å­¦æœ¯è‡ªç”±ï¼š</strong>ä¹¦é™¢æä¾›ç›¸å¯¹è‡ªç”±çš„å­¦æœ¯ç¯å¢ƒï¼Œä¿ƒè¿›æ€æƒ³äº¤æµå’Œåˆ›æ–°ã€‚</p>
            <p><strong>çŸ¥è¡Œåˆä¸€ï¼š</strong>æ³¨é‡ç†è®ºä¸å®è·µç»“åˆï¼ŒåŸ¹å…»å…¨é¢å‘å±•çš„äººæ‰ã€‚</p>
        </div>

        <div class="knowledge-point">
            <strong>æŠ€æœ¯æ€»ç»“ï¼š</strong>æœ¬é¡µé¢é€šè¿‡å¤ä»£ä¹¦é™¢ç®¡ç†ç³»ç»Ÿå±•ç¤ºäº†Reactçš„æ ¸å¿ƒæ¦‚å¿µï¼š
            <br>â€¢ <strong>ç»„ä»¶åŒ–ï¼š</strong>å°†UIæ‹†åˆ†ä¸ºç‹¬ç«‹ã€å¯å¤ç”¨çš„ç»„ä»¶
            <br>â€¢ <strong>JSXè¯­æ³•ï¼š</strong>åœ¨JavaScriptä¸­ç¼–å†™ç±»ä¼¼HTMLçš„è¯­æ³•
            <br>â€¢ <strong>çŠ¶æ€ç®¡ç†ï¼š</strong>ä½¿ç”¨stateç®¡ç†ç»„ä»¶çš„åŠ¨æ€æ•°æ®
            <br>â€¢ <strong>å±æ€§ä¼ é€’ï¼š</strong>é€šè¿‡propsåœ¨ç»„ä»¶é—´ä¼ é€’æ•°æ®
            <br>â€¢ <strong>ç”Ÿå‘½å‘¨æœŸï¼š</strong>ç»„ä»¶ä»åˆ›å»ºåˆ°é”€æ¯çš„å®Œæ•´è¿‡ç¨‹
            <br>â€¢ <strong>Hooksï¼š</strong>å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨çŠ¶æ€å’Œå…¶ä»–Reactç‰¹æ€§
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useContext, useReducer, useMemo, useCallback, createContext } = React;

        // ä¹¦é™¢ä¸Šä¸‹æ–‡
        const AcademyContext = createContext();

        // å­¦ç”Ÿç»„ä»¶
        function Student({ name, age, course, isSelected, onSelect }) {
            return (
                <div
                    className={`student-card ${isSelected ? 'selected' : ''}`}
                    onClick={() => onSelect(name)}
                >
                    <h4>ğŸ‘¨â€ğŸ“ {name}</h4>
                    <p>å¹´é¾„: {age}å²</p>
                    <p>è¯¾ç¨‹: {course}</p>
                    <p>çŠ¶æ€: {isSelected ? 'å·²é€‰ä¸­' : 'æœªé€‰ä¸­'}</p>
                </div>
            );
        }

        // è¯¾ç¨‹ç»„ä»¶
        function Course({ title, teacher, students, duration }) {
            return (
                <div className="course-card">
                    <h4>ğŸ“š {title}</h4>
                    <p>æˆè¯¾è€å¸ˆ: {teacher}</p>
                    <p>å­¦ç”Ÿäººæ•°: {students}äºº</p>
                    <p>è¯¾ç¨‹æ—¶é•¿: {duration}</p>
                </div>
            );
        }

        // ä¹¦é™¢ç®¡ç†ç»„ä»¶
        function AcademyManager() {
            const [students, setStudents] = useState([
                { id: 1, name: 'æç™½', age: 20, course: 'è¯—è¯åˆ›ä½œ' },
                { id: 2, name: 'æœç”«', age: 22, course: 'è¯—è¯åˆ›ä½œ' },
                { id: 3, name: 'è‹è½¼', age: 21, course: 'æ•£æ–‡å†™ä½œ' },
                { id: 4, name: 'è¾›å¼ƒç–¾', age: 23, course: 'è¯æ›²åˆ›ä½œ' }
            ]);

            const [selectedStudent, setSelectedStudent] = useState(null);
            const [academyStats, setAcademyStats] = useState({
                totalStudents: 4,
                totalCourses: 3,
                totalTeachers: 2
            });

            const handleStudentSelect = (studentName) => {
                setSelectedStudent(selectedStudent === studentName ? null : studentName);
            };

            const addStudent = () => {
                const newStudent = {
                    id: students.length + 1,
                    name: `å­¦ç”Ÿ${students.length + 1}`,
                    age: Math.floor(Math.random() * 5) + 18,
                    course: ['è¯—è¯åˆ›ä½œ', 'æ•£æ–‡å†™ä½œ', 'è¯æ›²åˆ›ä½œ'][Math.floor(Math.random() * 3)]
                };
                setStudents([...students, newStudent]);
                setAcademyStats(prev => ({ ...prev, totalStudents: prev.totalStudents + 1 }));
            };

            return (
                <AcademyContext.Provider value={{ academyStats }}>
                    <div>
                        <h3>ğŸ« ä¹¦é™¢å­¦ç”Ÿç®¡ç†</h3>
                        <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '10px' }}>
                            {students.map(student => (
                                <Student
                                    key={student.id}
                                    name={student.name}
                                    age={student.age}
                                    course={student.course}
                                    isSelected={selectedStudent === student.name}
                                    onSelect={handleStudentSelect}
                                />
                            ))}
                        </div>
                        <div style={{ textAlign: 'center', margin: '20px 0' }}>
                            <button className="btn success" onClick={addStudent}>
                                æ·»åŠ å­¦ç”Ÿ
                            </button>
                            {selectedStudent && (
                                <p>å½“å‰é€‰ä¸­: {selectedStudent}</p>
                            )}
                        </div>
                        <AcademyStats />
                    </div>
                </AcademyContext.Provider>
            );
        }

        // ä¹¦é™¢ç»Ÿè®¡ç»„ä»¶
        function AcademyStats() {
            const { academyStats } = useContext(AcademyContext);

            return (
                <div className="stats-grid">
                    <div className="stat-card">
                        <div className="stat-number">{academyStats.totalStudents}</div>
                        <div>å­¦ç”Ÿæ€»æ•°</div>
                    </div>
                    <div className="stat-card">
                        <div className="stat-number">{academyStats.totalCourses}</div>
                        <div>è¯¾ç¨‹æ€»æ•°</div>
                    </div>
                    <div className="stat-card">
                        <div className="stat-number">{academyStats.totalTeachers}</div>
                        <div>æ•™å¸ˆæ€»æ•°</div>
                    </div>
                </div>
            );
        }

        // ç”Ÿå‘½å‘¨æœŸæ¼”ç¤ºç»„ä»¶
        class LifecycleDemo extends React.Component {
            constructor(props) {
                super(props);
                this.state = {
                    count: 0,
                    logs: ['ç»„ä»¶æ„é€ å‡½æ•°è°ƒç”¨']
                };
                this.addLog('constructor: ç»„ä»¶åˆå§‹åŒ–');
            }

            componentDidMount() {
                this.addLog('componentDidMount: ç»„ä»¶å·²æŒ‚è½½');
            }

            componentDidUpdate(prevProps, prevState) {
                this.addLog('componentDidUpdate: ç»„ä»¶å·²æ›´æ–°');
            }

            componentWillUnmount() {
                this.addLog('componentWillUnmount: ç»„ä»¶å³å°†å¸è½½');
            }

            addLog = (message) => {
                this.setState(prevState => ({
                    logs: [...prevState.logs, `${new Date().toLocaleTimeString()}: ${message}`]
                }));
            }

            handleIncrement = () => {
                this.setState(prevState => ({ count: prevState.count + 1 }));
            }

            render() {
                return (
                    <div>
                        <h4>ğŸ“Š ç”Ÿå‘½å‘¨æœŸæ—¥å¿—</h4>
                        <p>è®¡æ•°å™¨: {this.state.count}</p>
                        <button className="btn" onClick={this.handleIncrement}>
                            å¢åŠ è®¡æ•°
                        </button>
                        <div style={{ background: 'rgba(0,0,0,0.1)', padding: '10px', borderRadius: '5px', margin: '10px 0', maxHeight: '200px', overflow: 'auto' }}>
                            {this.state.logs.map((log, index) => (
                                <div key={index} style={{ fontSize: '0.9em', margin: '2px 0' }}>
                                    {log}
                                </div>
                            ))}
                        </div>
                    </div>
                );
            }
        }

        // Hooksæ¼”ç¤ºç»„ä»¶
        function HooksDemo() {
            const [count, setCount] = useState(0);
            const [name, setName] = useState('');
            const [todos, setTodos] = useState([]);

            // useEffectæ¼”ç¤º
            useEffect(() => {
                document.title = `ä¹¦é™¢ç®¡ç† - è®¡æ•°: ${count}`;
            }, [count]);

            // useMemoæ¼”ç¤º
            const expensiveValue = useMemo(() => {
                console.log('è®¡ç®—æ˜‚è´µçš„å€¼...');
                return count * 2;
            }, [count]);

            // useCallbackæ¼”ç¤º
            const handleAddTodo = useCallback(() => {
                if (name.trim()) {
                    setTodos(prev => [...prev, { id: Date.now(), text: name }]);
                    setName('');
                }
            }, [name]);

            return (
                <div>
                    <h4>ğŸ£ Hooksæ¼”ç¤º</h4>
                    <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: '20px' }}>
                        <div>
                            <h5>useState & useEffect</h5>
                            <p>è®¡æ•°: {count}</p>
                            <p>è®¡ç®—å€¼: {expensiveValue}</p>
                            <button className="btn" onClick={() => setCount(count + 1)}>
                                å¢åŠ 
                            </button>
                        </div>
                        <div>
                            <h5>useCallback & å¾…åŠäº‹é¡¹</h5>
                            <input
                                className="input-field"
                                value={name}
                                onChange={(e) => setName(e.target.value)}
                                placeholder="è¾“å…¥å¾…åŠäº‹é¡¹"
                                onKeyPress={(e) => e.key === 'Enter' && handleAddTodo()}
                            />
                            <button className="btn success" onClick={handleAddTodo}>
                                æ·»åŠ 
                            </button>
                            <div style={{ maxHeight: '150px', overflow: 'auto', margin: '10px 0' }}>
                                {todos.map(todo => (
                                    <div key={todo.id} style={{ padding: '5px', background: 'rgba(255,255,255,0.1)', margin: '2px 0', borderRadius: '3px' }}>
                                        {todo.text}
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // æ¸²æŸ“å‡½æ•°
        function renderComponent(containerId, component) {
            const container = document.getElementById(containerId);
            if (container) {
                ReactDOM.render(component, container);
            }
        }

        // åˆå§‹åŒ–æ¸²æŸ“
        document.addEventListener('DOMContentLoaded', function () {
            renderComponent('componentApp', <AcademyManager />);
            renderComponent('stateApp', <AcademyManager />);
            renderComponent('propsApp', <AcademyManager />);
            renderComponent('lifecycleApp', <LifecycleDemo />);
            renderComponent('hooksApp', <HooksDemo />);
        });
    </script>

    <script>
        // éReactçš„JavaScriptå‡½æ•°
        function showFunctionComponent() {
            const result = document.getElementById('componentCode');
            result.style.display = 'block';
            result.innerHTML = `
// Reactå‡½æ•°ç»„ä»¶ç¤ºä¾‹
function Student({ name, age, course, isSelected, onSelect }) {
    return (
        <div 
            className={\`student-card \${isSelected ? 'selected' : ''}\`}
            onClick={() => onSelect(name)}
        >
            <h4>ğŸ‘¨â€ğŸ“ {name}</h4>
            <p>å¹´é¾„: {age}å²</p>
            <p>è¯¾ç¨‹: {course}</p>
            <p>çŠ¶æ€: {isSelected ? 'å·²é€‰ä¸­' : 'æœªé€‰ä¸­'}</p>
        </div>
    );
}

// ä½¿ç”¨ç»„ä»¶
function App() {
    const [selectedStudent, setSelectedStudent] = useState(null);
    
    return (
        <div>
            <Student 
                name="æç™½" 
                age={20} 
                course="è¯—è¯åˆ›ä½œ"
                isSelected={selectedStudent === 'æç™½'}
                onSelect={setSelectedStudent}
            />
        </div>
    );
}
            `;
        }

        function showClassComponent() {
            const result = document.getElementById('componentCode');
            result.style.display = 'block';
            result.innerHTML = `
// Reactç±»ç»„ä»¶ç¤ºä¾‹
class AcademyManager extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            students: [],
            selectedStudent: null
        };
    }
    
    handleStudentSelect = (studentName) => {
        this.setState({
            selectedStudent: this.state.selectedStudent === studentName ? null : studentName
        });
    }
    
    addStudent = () => {
        const newStudent = {
            id: this.state.students.length + 1,
            name: \`å­¦ç”Ÿ\${this.state.students.length + 1}\`,
            age: Math.floor(Math.random() * 5) + 18,
            course: 'è¯—è¯åˆ›ä½œ'
        };
        
        this.setState({
            students: [...this.state.students, newStudent]
        });
    }
    
    render() {
        return (
            <div>
                <h3>ä¹¦é™¢å­¦ç”Ÿç®¡ç†</h3>
                {this.state.students.map(student => (
                    <Student
                        key={student.id}
                        name={student.name}
                        age={student.age}
                        course={student.course}
                        isSelected={this.state.selectedStudent === student.name}
                        onSelect={this.handleStudentSelect}
                    />
                ))}
                <button onClick={this.addStudent}>æ·»åŠ å­¦ç”Ÿ</button>
            </div>
        );
    }
}
            `;
        }

        function showComponentTree() {
            const result = document.getElementById('componentCode');
            result.style.display = 'block';
            result.innerHTML = `
// Reactç»„ä»¶æ ‘ç»“æ„
App
â”œâ”€â”€ AcademyManager
â”‚   â”œâ”€â”€ Student (æç™½)
â”‚   â”œâ”€â”€ Student (æœç”«)
â”‚   â”œâ”€â”€ Student (è‹è½¼)
â”‚   â””â”€â”€ Student (è¾›å¼ƒç–¾)
â”œâ”€â”€ CourseManager
â”‚   â”œâ”€â”€ Course (è¯—è¯åˆ›ä½œ)
â”‚   â”œâ”€â”€ Course (æ•£æ–‡å†™ä½œ)
â”‚   â””â”€â”€ Course (è¯æ›²åˆ›ä½œ)
â””â”€â”€ AcademyStats
    â”œâ”€â”€ StatCard (å­¦ç”Ÿæ€»æ•°)
    â”œâ”€â”€ StatCard (è¯¾ç¨‹æ€»æ•°)
    â””â”€â”€ StatCard (æ•™å¸ˆæ€»æ•°)

// ç»„ä»¶ç»„åˆç¤ºä¾‹
function App() {
    return (
        <div className="academy-app">
            <Header title="å¤ä»£ä¹¦é™¢ç®¡ç†ç³»ç»Ÿ" />
            <main>
                <AcademyManager />
                <CourseManager />
            </main>
            <Footer />
        </div>
    );
}

// ç»„ä»¶å¤ç”¨
function StatCard({ title, value, icon }) {
    return (
        <div className="stat-card">
            <div className="stat-icon">{icon}</div>
            <div className="stat-number">{value}</div>
            <div className="stat-title">{title}</div>
        </div>
    );
}

// åœ¨å¤šä¸ªåœ°æ–¹ä½¿ç”¨ç›¸åŒç»„ä»¶
<StatCard title="å­¦ç”Ÿ" value={25} icon="ğŸ‘¨â€ğŸ“" />
<StatCard title="æ•™å¸ˆ" value={5} icon="ğŸ‘¨â€ğŸ«" />
<StatCard title="è¯¾ç¨‹" value={8} icon="ğŸ“š" />
            `;
        }

        function showJSXExample() {
            const result = document.getElementById('componentCode');
            result.style.display = 'block';
            result.innerHTML = `
// JSXè¯­æ³•ç¤ºä¾‹

// 1. JSXå…ƒç´ 
const element = <h1>æ¬¢è¿æ¥åˆ°å¤ä»£ä¹¦é™¢</h1>;

// 2. JSXè¡¨è¾¾å¼
const name = 'æç™½';
const greeting = <h1>æ¬¢è¿, {name}!</h1>;

// 3. JSXå±æ€§
const student = (
    <div className="student-card" id="student-1">
        <img src="/images/student.jpg" alt="å­¦ç”Ÿç…§ç‰‡" />
        <h3>{name}</h3>
    </div>
);

// 4. JSXå­å…ƒç´ 
const studentList = (
    <div className="student-list">
        <h2>å­¦ç”Ÿåå•</h2>
        <ul>
            <li>æç™½ - è¯—è¯åˆ›ä½œ</li>
            <li>æœç”« - è¯—è¯åˆ›ä½œ</li>
            <li>è‹è½¼ - æ•£æ–‡å†™ä½œ</li>
        </ul>
    </div>
);

// 5. JSXæ¡ä»¶æ¸²æŸ“
function StudentCard({ student, isSelected }) {
    return (
        <div className="student-card">
            <h3>{student.name}</h3>
            {isSelected && <span className="selected-badge">å·²é€‰ä¸­</span>}
            {student.age >= 20 ? (
                <span className="adult">æˆå¹´å­¦ç”Ÿ</span>
            ) : (
                <span className="minor">æœªæˆå¹´å­¦ç”Ÿ</span>
            )}
        </div>
    );
}

// 6. JSXåˆ—è¡¨æ¸²æŸ“
function StudentList({ students }) {
    return (
        <div>
            {students.map(student => (
                <StudentCard 
                    key={student.id} 
                    student={student} 
                    isSelected={student.selected}
                />
            ))}
        </div>
    );
}

// 7. JSXäº‹ä»¶å¤„ç†
function Button() {
    const handleClick = (e) => {
        e.preventDefault();
        console.log('æŒ‰é’®è¢«ç‚¹å‡»äº†!');
    };
    
    return (
        <button 
            onClick={handleClick}
            onMouseEnter={() => console.log('é¼ æ ‡è¿›å…¥')}
            onMouseLeave={() => console.log('é¼ æ ‡ç¦»å¼€')}
        >
            ç‚¹å‡»æˆ‘
        </button>
    );
}
            `;
        }

        function demonstrateState() {
            console.log('æ¼”ç¤ºReactçŠ¶æ€ç®¡ç†');
        }

        function showStateUpdate() {
            const result = document.getElementById('stateCode');
            result.style.display = 'block';
            result.innerHTML = `
// ReactçŠ¶æ€æ›´æ–°ç¤ºä¾‹

// 1. useState Hook
function Counter() {
    const [count, setCount] = useState(0);
    
    const increment = () => {
        setCount(count + 1);  // ç›´æ¥è®¾ç½®æ–°å€¼
    };
    
    const incrementByTwo = () => {
        setCount(prevCount => prevCount + 2);  // ä½¿ç”¨å‡½æ•°æ›´æ–°
    };
    
    return (
        <div>
            <p>è®¡æ•°: {count}</p>
            <button onClick={increment}>+1</button>
            <button onClick={incrementByTwo}>+2</button>
        </div>
    );
}

// 2. ç±»ç»„ä»¶çŠ¶æ€
class StudentManager extends React.Component {
    state = {
        students: [],
        loading: false
    };
    
    addStudent = (newStudent) => {
        this.setState({
            students: [...this.state.students, newStudent]
        });
    };
    
    removeStudent = (studentId) => {
        this.setState({
            students: this.state.students.filter(s => s.id !== studentId)
        });
    };
    
    toggleLoading = () => {
        this.setState(prevState => ({
            loading: !prevState.loading
        }));
    };
}

// 3. å¤æ‚çŠ¶æ€ç®¡ç†
function AcademyManager() {
    const [academy, setAcademy] = useState({
        name: 'å²³éº“ä¹¦é™¢',
        students: [],
        courses: [],
        teachers: []
    });
    
    const addStudent = (student) => {
        setAcademy(prevAcademy => ({
            ...prevAcademy,
            students: [...prevAcademy.students, student]
        }));
    };
    
    const updateStudentCourse = (studentId, courseId) => {
        setAcademy(prevAcademy => ({
            ...prevAcademy,
            students: prevAcademy.students.map(student =>
                student.id === studentId
                    ? { ...student, courseId }
                    : student
            )
        }));
    };
}

// 4. çŠ¶æ€æ‰¹é‡æ›´æ–°
function BatchUpdate() {
    const [count, setCount] = useState(0);
    const [name, setName] = useState('');
    
    const handleMultipleUpdates = () => {
        // Reactä¼šè‡ªåŠ¨æ‰¹é‡å¤„ç†è¿™äº›æ›´æ–°
        setCount(c => c + 1);
        setName('æ–°åå­—');
        setCount(c => c + 1);
    };
}
            `;
        }

        function showStateLifting() {
            const result = document.getElementById('stateCode');
            result.style.display = 'block';
            result.innerHTML = `
// çŠ¶æ€æå‡ç¤ºä¾‹

// å­ç»„ä»¶
function StudentCard({ student, onSelect, isSelected }) {
    return (
        <div 
            className={\`student-card \${isSelected ? 'selected' : ''}\`}
            onClick={() => onSelect(student.id)}
        >
            <h4>{student.name}</h4>
            <p>{student.course}</p>
        </div>
    );
}

function CourseInfo({ selectedStudentId, students }) {
    const selectedStudent = students.find(s => s.id === selectedStudentId);
    
    if (!selectedStudent) {
        return <p>è¯·é€‰æ‹©ä¸€ä¸ªå­¦ç”Ÿ</p>;
    }
    
    return (
        <div>
            <h3>å­¦ç”Ÿä¿¡æ¯</h3>
            <p>å§“å: {selectedStudent.name}</p>
            <p>è¯¾ç¨‹: {selectedStudent.course}</p>
            <p>å¹´é¾„: {selectedStudent.age}</p>
        </div>
    );
}

// çˆ¶ç»„ä»¶ - çŠ¶æ€æå‡åˆ°è¿™é‡Œ
function AcademyApp() {
    const [students] = useState([
        { id: 1, name: 'æç™½', course: 'è¯—è¯åˆ›ä½œ', age: 20 },
        { id: 2, name: 'æœç”«', course: 'è¯—è¯åˆ›ä½œ', age: 22 }
    ]);
    
    const [selectedStudentId, setSelectedStudentId] = useState(null);
    
    return (
        <div>
            <div className="student-list">
                {students.map(student => (
                    <StudentCard
                        key={student.id}
                        student={student}
                        onSelect={setSelectedStudentId}
                        isSelected={selectedStudentId === student.id}
                    />
                ))}
            </div>
            <CourseInfo 
                selectedStudentId={selectedStudentId}
                students={students}
            />
        </div>
    );
}

// çŠ¶æ€æå‡çš„å¥½å¤„:
// 1. å¤šä¸ªç»„ä»¶å¯ä»¥å…±äº«åŒä¸€çŠ¶æ€
// 2. çŠ¶æ€å˜åŒ–æ—¶ï¼Œæ‰€æœ‰ç›¸å…³ç»„ä»¶éƒ½ä¼šæ›´æ–°
// 3. æ•°æ®æµå‘æ¸…æ™°ï¼Œä¾¿äºè°ƒè¯•
// 4. é¿å…çŠ¶æ€ä¸ä¸€è‡´çš„é—®é¢˜
            `;
        }

        function resetState() {
            // é‡æ–°æ¸²æŸ“ç»„ä»¶ä»¥é‡ç½®çŠ¶æ€
            renderComponent('stateApp', React.createElement(AcademyManager));
        }

        function showPropsFlow() {
            const result = document.getElementById('propsCode');
            result.style.display = 'block';
            result.innerHTML = `
// Propså±æ€§ä¼ é€’ç¤ºä¾‹

// 1. åŸºç¡€å±æ€§ä¼ é€’
function Student({ name, age, course }) {
    return (
        <div className="student-card">
            <h4>{name}</h4>
            <p>å¹´é¾„: {age}</p>
            <p>è¯¾ç¨‹: {course}</p>
        </div>
    );
}

// ä½¿ç”¨ç»„ä»¶
<Student name="æç™½" age={20} course="è¯—è¯åˆ›ä½œ" />

// 2. å¯¹è±¡å±æ€§ä¼ é€’
function StudentCard({ student }) {
    return (
        <div>
            <h4>{student.name}</h4>
            <p>{student.age}å²</p>
            <p>{student.course}</p>
        </div>
    );
}

const student = { name: 'æœç”«', age: 22, course: 'è¯—è¯åˆ›ä½œ' };
<StudentCard student={student} />

// 3. å‡½æ•°å±æ€§ä¼ é€’
function Button({ onClick, children }) {
    return (
        <button onClick={onClick}>
            {children}
        </button>
    );
}

<Button onClick={() => console.log('ç‚¹å‡»äº†')}>ç‚¹å‡»æˆ‘</Button>

// 4. å±æ€§è§£æ„
function StudentInfo({ name, age, course, ...otherProps }) {
    return (
        <div {...otherProps}>
            <h4>{name}</h4>
            <p>{age}å² - {course}</p>
        </div>
    );
}

// 5. å±æ€§ä¼ æ’­
function StudentCard(props) {
    return (
        <div className="card">
            <StudentInfo {...props} />
        </div>
    );
}

// 6. æ¡ä»¶å±æ€§
function Student({ name, isSelected, onSelect }) {
    return (
        <div 
            className={isSelected ? 'selected' : ''}
            onClick={onSelect && (() => onSelect(name))}
        >
            {name}
        </div>
    );
}
            `;
        }

        function showDefaultProps() {
            const result = document.getElementById('propsCode');
            result.style.display = 'block';
            result.innerHTML = `
// é»˜è®¤å±æ€§ç¤ºä¾‹

// 1. å‡½æ•°ç»„ä»¶é»˜è®¤å‚æ•°
function Student({ 
    name = 'æœªçŸ¥å­¦ç”Ÿ', 
    age = 18, 
    course = 'åŸºç¡€è¯¾ç¨‹',
    isActive = true 
}) {
    return (
        <div className={\`student \${isActive ? 'active' : 'inactive'}\`}>
            <h4>{name}</h4>
            <p>å¹´é¾„: {age}</p>
            <p>è¯¾ç¨‹: {course}</p>
        </div>
    );
}

// 2. ç±»ç»„ä»¶é»˜è®¤å±æ€§
class StudentCard extends React.Component {
    static defaultProps = {
        name: 'æœªçŸ¥å­¦ç”Ÿ',
        age: 18,
        course: 'åŸºç¡€è¯¾ç¨‹',
        avatar: '/default-avatar.png'
    };
    
    render() {
        const { name, age, course, avatar } = this.props;
        return (
            <div className="student-card">
                <img src={avatar} alt={name} />
                <h4>{name}</h4>
                <p>{age}å² - {course}</p>
            </div>
        );
    }
}

// 3. ä½¿ç”¨é»˜è®¤å±æ€§
<Student />  // ä½¿ç”¨æ‰€æœ‰é»˜è®¤å€¼
<Student name="æç™½" />  // åªè¦†ç›–nameï¼Œå…¶ä»–ä½¿ç”¨é»˜è®¤å€¼
<Student name="æœç”«" age={22} />  // è¦†ç›–nameå’Œage

// 4. å¤æ‚é»˜è®¤å±æ€§
function CourseCard({ 
    course = {
        title: 'é»˜è®¤è¯¾ç¨‹',
        teacher: 'å¾…å®š',
        duration: '1å­¦æœŸ',
        students: []
    },
    showStats = true
}) {
    return (
        <div className="course-card">
            <h3>{course.title}</h3>
            <p>æ•™å¸ˆ: {course.teacher}</p>
            <p>æ—¶é•¿: {course.duration}</p>
            {showStats && (
                <p>å­¦ç”Ÿæ•°: {course.students.length}</p>
            )}
        </div>
    );
}

// 5. æ¡ä»¶é»˜è®¤å€¼
function StudentStatus({ student, showDetails = false }) {
    const status = student?.status || 'æœªçŸ¥çŠ¶æ€';
    const details = student?.details || {};
    
    return (
        <div>
            <span>çŠ¶æ€: {status}</span>
            {showDetails && details.lastLogin && (
                <span>æœ€åç™»å½•: {details.lastLogin}</span>
            )}
        </div>
    );
}
            `;
        }

        function showPropTypes() {
            const result = document.getElementById('propsCode');
            result.style.display = 'block';
            result.innerHTML = `
// PropTypeså±æ€§éªŒè¯ç¤ºä¾‹
// æ³¨æ„: éœ€è¦å¼•å…¥ prop-types åº“

import PropTypes from 'prop-types';

// 1. åŸºç¡€ç±»å‹éªŒè¯
function Student({ name, age, isActive, courses }) {
    return (
        <div>
            <h4>{name}</h4>
            <p>å¹´é¾„: {age}</p>
            <p>çŠ¶æ€: {isActive ? 'æ´»è·ƒ' : 'éæ´»è·ƒ'}</p>
            <p>è¯¾ç¨‹æ•°: {courses.length}</p>
        </div>
    );
}

Student.propTypes = {
    name: PropTypes.string.isRequired,      // å¿…éœ€çš„å­—ç¬¦ä¸²
    age: PropTypes.number,                  // å¯é€‰çš„æ•°å­—
    isActive: PropTypes.bool,               // å¯é€‰çš„å¸ƒå°”å€¼
    courses: PropTypes.array                // å¯é€‰çš„æ•°ç»„
};

// 2. å¤æ‚ç±»å‹éªŒè¯
function CourseCard({ course, onEnroll, students }) {
    return (
        <div>
            <h3>{course.title}</h3>
            <p>æ•™å¸ˆ: {course.teacher.name}</p>
            <button onClick={() => onEnroll(course.id)}>
                æŠ¥åè¯¾ç¨‹
            </button>
        </div>
    );
}

CourseCard.propTypes = {
    course: PropTypes.shape({               // å¯¹è±¡å½¢çŠ¶éªŒè¯
        id: PropTypes.number.isRequired,
        title: PropTypes.string.isRequired,
        teacher: PropTypes.shape({
            id: PropTypes.number,
            name: PropTypes.string.isRequired
        }).isRequired
    }).isRequired,
    onEnroll: PropTypes.func.isRequired,    // å¿…éœ€çš„å‡½æ•°
    students: PropTypes.arrayOf(            // ç‰¹å®šç±»å‹çš„æ•°ç»„
        PropTypes.shape({
            id: PropTypes.number,
            name: PropTypes.string
        })
    )
};

// 3. æšä¸¾å€¼éªŒè¯
function StatusBadge({ status, size }) {
    return (
        <span className={\`badge badge-\${status} badge-\${size}\`}>
            {status}
        </span>
    );
}

StatusBadge.propTypes = {
    status: PropTypes.oneOf(['active', 'inactive', 'pending']).isRequired,
    size: PropTypes.oneOf(['small', 'medium', 'large'])
};

// 4. è‡ªå®šä¹‰éªŒè¯
function AgeInput({ age }) {
    return <input type="number" value={age} />;
}

AgeInput.propTypes = {
    age: function(props, propName, componentName) {
        const age = props[propName];
        if (age < 0 || age > 150) {
            return new Error(
                \`Invalid prop \${propName} supplied to \${componentName}. \` +
                \`Age must be between 0 and 150.\`
            );
        }
    }
};

// 5. ç±»ç»„ä»¶PropTypes
class StudentList extends React.Component {
    static propTypes = {
        students: PropTypes.arrayOf(
            PropTypes.shape({
                id: PropTypes.number.isRequired,
                name: PropTypes.string.isRequired,
                age: PropTypes.number
            })
        ).isRequired,
        onStudentSelect: PropTypes.func,
        maxDisplay: PropTypes.number
    };
    
    static defaultProps = {
        maxDisplay: 10
    };
    
    render() {
        // ç»„ä»¶å®ç°...
    }
}
            `;
        }

        function showChildrenProps() {
            const result = document.getElementById('propsCode');
            result.style.display = 'block';
            result.innerHTML = `
// Childrenå±æ€§ç¤ºä¾‹

// 1. åŸºç¡€childrenä½¿ç”¨
function Card({ children, title }) {
    return (
        <div className="card">
            <h3>{title}</h3>
            <div className="card-content">
                {children}
            </div>
        </div>
    );
}

// ä½¿ç”¨æ–¹å¼
<Card title="å­¦ç”Ÿä¿¡æ¯">
    <p>å§“å: æç™½</p>
    <p>å¹´é¾„: 20å²</p>
    <p>è¯¾ç¨‹: è¯—è¯åˆ›ä½œ</p>
</Card>

// 2. å¤šä¸ªchildren
function Layout({ header, sidebar, children }) {
    return (
        <div className="layout">
            <header>{header}</header>
            <div className="main">
                <aside>{sidebar}</aside>
                <main>{children}</main>
            </div>
        </div>
    );
}

<Layout
    header={<h1>ä¹¦é™¢ç®¡ç†ç³»ç»Ÿ</h1>}
    sidebar={<nav>å¯¼èˆªèœå•</nav>}
>
    <div>ä¸»è¦å†…å®¹åŒºåŸŸ</div>
</Layout>

// 3. childrenæ“ä½œ
function StudentList({ children }) {
    const studentCount = React.Children.count(children);
    
    return (
        <div>
            <h3>å­¦ç”Ÿåˆ—è¡¨ (å…±{studentCount}äºº)</h3>
            <div className="student-grid">
                {React.Children.map(children, (child, index) => (
                    <div key={index} className="student-item">
                        {child}
                    </div>
                ))}
            </div>
        </div>
    );
}

// 4. æ¡ä»¶æ¸²æŸ“children
function Modal({ isOpen, children, onClose }) {
    if (!isOpen) return null;
    
    return (
        <div className="modal-overlay" onClick={onClose}>
            <div className="modal-content" onClick={e => e.stopPropagation()}>
                <button className="close-btn" onClick={onClose}>Ã—</button>
                {children}
            </div>
        </div>
    );
}

// 5. childrenä½œä¸ºå‡½æ•° (Render Props)
function DataProvider({ children, data, loading }) {
    return (
        <div>
            {typeof children === 'function' 
                ? children({ data, loading })
                : children
            }
        </div>
    );
}

// ä½¿ç”¨render props
<DataProvider data={students} loading={false}>
    {({ data, loading }) => (
        loading ? (
            <div>åŠ è½½ä¸­...</div>
        ) : (
            <div>
                {data.map(student => (
                    <StudentCard key={student.id} student={student} />
                ))}
            </div>
        )
    )}
</DataProvider>

// 6. childrenå…‹éš†å’Œä¿®æ”¹
function ButtonGroup({ children, size = 'medium' }) {
    return (
        <div className="button-group">
            {React.Children.map(children, child => {
                if (React.isValidElement(child)) {
                    return React.cloneElement(child, {
                        size: size,
                        className: \`\${child.props.className || ''} btn-\${size}\`
                    });
                }
                return child;
            })}
        </div>
    );
}
            `;
        }

        function showLifecycleStage(stage) {
            // ç§»é™¤æ‰€æœ‰activeç±»
            document.querySelectorAll('.lifecycle-stage').forEach(el => {
                el.classList.remove('active');
            });

            // æ·»åŠ activeç±»åˆ°å½“å‰é˜¶æ®µ
            event.target.closest('.lifecycle-stage').classList.add('active');

            const result = document.getElementById('lifecycleCode');
            result.style.display = 'block';

            const stageInfo = {
                mounting: `
// æŒ‚è½½é˜¶æ®µç”Ÿå‘½å‘¨æœŸ
class StudentCard extends React.Component {
    constructor(props) {
        super(props);
        this.state = {
            student: null,
            loading: true
        };
        console.log('1. constructor: ç»„ä»¶æ„é€ å‡½æ•°');
    }
    
    static getDerivedStateFromProps(props, state) {
        console.log('2. getDerivedStateFromProps: ä»propsæ´¾ç”Ÿstate');
        // è¿”å›æ–°çš„stateæˆ–null
        return {
            student: props.student
        };
    }
    
    componentDidMount() {
        console.log('3. componentDidMount: ç»„ä»¶å·²æŒ‚è½½åˆ°DOM');
        // å¯ä»¥è¿›è¡ŒAPIè°ƒç”¨ã€è®¾ç½®å®šæ—¶å™¨ç­‰
        this.setState({ loading: false });
    }
    
    render() {
        console.log('4. render: æ¸²æŸ“ç»„ä»¶');
        const { student, loading } = this.state;
        
        if (loading) {
            return <div>åŠ è½½ä¸­...</div>;
        }
        
        return (
            <div className="student-card">
                <h4>{student?.name || 'æœªçŸ¥å­¦ç”Ÿ'}</h4>
                <p>å¹´é¾„: {student?.age}å²</p>
                <p>è¯¾ç¨‹: {student?.course}</p>
            </div>
        );
    }
}
                `,
                updating: `
// æ›´æ–°é˜¶æ®µç”Ÿå‘½å‘¨æœŸ
class StudentCard extends React.Component {
    static getDerivedStateFromProps(props, state) {
        console.log('1. getDerivedStateFromProps: æ›´æ–°æ—¶ä»propsæ´¾ç”Ÿstate');
        return null;
    }
    
    shouldComponentUpdate(nextProps, nextState) {
        console.log('2. shouldComponentUpdate: å†³å®šæ˜¯å¦æ›´æ–°');
        // è¿”å›trueæˆ–falseå†³å®šæ˜¯å¦é‡æ–°æ¸²æŸ“
        return nextProps.student.id !== this.props.student.id;
    }
    
    render() {
        console.log('3. render: é‡æ–°æ¸²æŸ“ç»„ä»¶');
        return (
            <div className="student-card">
                <h4>{this.props.student.name}</h4>
                <p>æ›´æ–°æ—¶é—´: {new Date().toLocaleTimeString()}</p>
            </div>
        );
    }
    
    getSnapshotBeforeUpdate(prevProps, prevState) {
        console.log('4. getSnapshotBeforeUpdate: æ›´æ–°å‰è·å–å¿«ç…§');
        // è¿”å›å€¼ä¼šä¼ é€’ç»™componentDidUpdate
        return { scrollPosition: window.scrollY };
    }
    
    componentDidUpdate(prevProps, prevState, snapshot) {
        console.log('5. componentDidUpdate: ç»„ä»¶æ›´æ–°å®Œæˆ');
        console.log('å¿«ç…§æ•°æ®:', snapshot);
    }
}
                `,
                unmounting: `
// å¸è½½é˜¶æ®µç”Ÿå‘½å‘¨æœŸ
class StudentCard extends React.Component {
    componentWillUnmount() {
        console.log('componentWillUnmount: ç»„ä»¶å³å°†å¸è½½');
        // æ¸…ç†å·¥ä½œï¼šæ¸…é™¤å®šæ—¶å™¨ã€å–æ¶ˆç½‘ç»œè¯·æ±‚ã€æ¸…ç†è®¢é˜…ç­‰
        if (this.timer) {
            clearInterval(this.timer);
        }
        
        if (this.subscription) {
            this.subscription.unsubscribe();
        }
        
        // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
        window.removeEventListener('resize', this.handleResize);
    }
    
    componentDidMount() {
        // è®¾ç½®éœ€è¦æ¸…ç†çš„èµ„æº
        this.timer = setInterval(() => {
            console.log('å®šæ—¶å™¨è¿è¡Œä¸­...');
        }, 1000);
        
        window.addEventListener('resize', this.handleResize);
    }
    
    handleResize = () => {
        console.log('çª—å£å¤§å°æ”¹å˜');
    }
    
    render() {
        return (
            <div className="student-card">
                <h4>å­¦ç”Ÿå¡ç‰‡</h4>
                <p>ç»„ä»¶å°†åœ¨å¸è½½æ—¶æ¸…ç†æ‰€æœ‰èµ„æº</p>
            </div>
        );
    }
}
                `,
                error: `
// é”™è¯¯å¤„ç†ç”Ÿå‘½å‘¨æœŸ
class ErrorBoundary extends React.Component {
    constructor(props) {
        super(props);
        this.state = { hasError: false, error: null };
    }
    
    static getDerivedStateFromError(error) {
        console.log('getDerivedStateFromError: æ•è·é”™è¯¯å¹¶æ›´æ–°state');
        // æ›´æ–°stateä»¥æ˜¾ç¤ºé”™è¯¯UI
        return { hasError: true, error };
    }
    
    componentDidCatch(error, errorInfo) {
        console.log('componentDidCatch: è®°å½•é”™è¯¯ä¿¡æ¯');
        console.error('é”™è¯¯è¯¦æƒ…:', error);
        console.error('é”™è¯¯ä¿¡æ¯:', errorInfo);
        
        // å¯ä»¥å°†é”™è¯¯ä¿¡æ¯å‘é€åˆ°é”™è¯¯æŠ¥å‘ŠæœåŠ¡
        // logErrorToService(error, errorInfo);
    }
    
    render() {
        if (this.state.hasError) {
            return (
                <div className="error-boundary">
                    <h3>âš ï¸ å‡ºç°é”™è¯¯</h3>
                    <p>ç»„ä»¶æ¸²æŸ“æ—¶å‘ç”Ÿé”™è¯¯</p>
                    <details>
                        <summary>é”™è¯¯è¯¦æƒ…</summary>
                        <pre>{this.state.error?.toString()}</pre>
                    </details>
                    <button onClick={() => this.setState({ hasError: false, error: null })}>
                        é‡è¯•
                    </button>
                </div>
            );
        }
        
        return this.props.children;
    }
}

// ä½¿ç”¨é”™è¯¯è¾¹ç•Œ
function App() {
    return (
        <ErrorBoundary>
            <StudentCard student={student} />
        </ErrorBoundary>
    );
}
                `
            };

            result.innerHTML = stageInfo[stage] || 'è¯·é€‰æ‹©ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸé˜¶æ®µ';
        }

        function mountComponent() {
            renderComponent('lifecycleApp', React.createElement(LifecycleDemo));
        }

        function updateComponent() {
            // è§¦å‘ç»„ä»¶æ›´æ–°
            const container = document.getElementById('lifecycleApp');
            if (container && container._reactInternalInstance) {
                // å¼ºåˆ¶æ›´æ–°
                container._reactInternalInstance.forceUpdate();
            }
        }

        function unmountComponent() {
            const container = document.getElementById('lifecycleApp');
            if (container) {
                ReactDOM.unmountComponentAtNode(container);
                container.innerHTML = '<p>ç»„ä»¶å·²å¸è½½</p>';
            }
        }

        function showHookExample(hookName) {
            const result = document.getElementById('hooksCode');
            result.style.display = 'block';

            const hookExamples = {
                useState: `
// useState Hookç¤ºä¾‹
function Counter() {
    const [count, setCount] = useState(0);
    const [name, setName] = useState('æç™½');
    
    return (
        <div>
            <h4>è®¡æ•°å™¨: {count}</h4>
            <button onClick={() => setCount(count + 1)}>å¢åŠ </button>
            <button onClick={() => setCount(count - 1)}>å‡å°‘</button>
            <button onClick={() => setCount(0)}>é‡ç½®</button>
            
            <h4>å§“å: {name}</h4>
            <input 
                value={name} 
                onChange={(e) => setName(e.target.value)}
                placeholder="è¾“å…¥å§“å"
            />
        </div>
    );
}

// å¤æ‚çŠ¶æ€ç®¡ç†
function StudentForm() {
    const [student, setStudent] = useState({
        name: '',
        age: 18,
        course: 'è¯—è¯åˆ›ä½œ',
        isActive: true
    });
    
    const updateStudent = (field, value) => {
        setStudent(prev => ({
            ...prev,
            [field]: value
        }));
    };
    
    return (
        <form>
            <input 
                value={student.name}
                onChange={(e) => updateStudent('name', e.target.value)}
                placeholder="å­¦ç”Ÿå§“å"
            />
            <input 
                type="number"
                value={student.age}
                onChange={(e) => updateStudent('age', parseInt(e.target.value))}
            />
            <select 
                value={student.course}
                onChange={(e) => updateStudent('course', e.target.value)}
            >
                <option value="è¯—è¯åˆ›ä½œ">è¯—è¯åˆ›ä½œ</option>
                <option value="æ•£æ–‡å†™ä½œ">æ•£æ–‡å†™ä½œ</option>
                <option value="è¯æ›²åˆ›ä½œ">è¯æ›²åˆ›ä½œ</option>
            </select>
        </form>
    );
}
                `,
                useEffect: `
// useEffect Hookç¤ºä¾‹
function StudentProfile({ studentId }) {
    const [student, setStudent] = useState(null);
    const [loading, setLoading] = useState(true);
    
    // 1. ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œ
    useEffect(() => {
        console.log('ç»„ä»¶æŒ‚è½½ï¼Œè®¾ç½®æ ‡é¢˜');
        document.title = 'å­¦ç”Ÿæ¡£æ¡ˆ';
        
        // æ¸…ç†å‡½æ•°
        return () => {
            console.log('ç»„ä»¶å¸è½½ï¼Œæ¢å¤æ ‡é¢˜');
            document.title = 'ä¹¦é™¢ç®¡ç†ç³»ç»Ÿ';
        };
    }, []); // ç©ºä¾èµ–æ•°ç»„ï¼Œåªåœ¨æŒ‚è½½å’Œå¸è½½æ—¶æ‰§è¡Œ
    
    // 2. ä¾èµ–å˜åŒ–æ—¶æ‰§è¡Œ
    useEffect(() => {
        console.log('å­¦ç”ŸIDå˜åŒ–ï¼Œé‡æ–°è·å–æ•°æ®');
        setLoading(true);
        
        // æ¨¡æ‹ŸAPIè°ƒç”¨
        const fetchStudent = async () => {
            try {
                const response = await fetch(\`/api/students/\${studentId}\`);
                const data = await response.json();
                setStudent(data);
            } catch (error) {
                console.error('è·å–å­¦ç”Ÿä¿¡æ¯å¤±è´¥:', error);
            } finally {
                setLoading(false);
            }
        };
        
        if (studentId) {
            fetchStudent();
        }
    }, [studentId]); // ä¾èµ–studentId
    
    // 3. æ¯æ¬¡æ¸²æŸ“åæ‰§è¡Œ
    useEffect(() => {
        console.log('ç»„ä»¶æ¸²æŸ“å®Œæˆ');
    }); // æ— ä¾èµ–æ•°ç»„
    
    if (loading) return <div>åŠ è½½ä¸­...</div>;
    if (!student) return <div>æœªæ‰¾åˆ°å­¦ç”Ÿ</div>;
    
    return (
        <div>
            <h3>{student.name}</h3>
            <p>å¹´é¾„: {student.age}</p>
            <p>è¯¾ç¨‹: {student.course}</p>
        </div>
    );
}

// å®šæ—¶å™¨ç¤ºä¾‹
function Timer() {
    const [seconds, setSeconds] = useState(0);
    
    useEffect(() => {
        const interval = setInterval(() => {
            setSeconds(prev => prev + 1);
        }, 1000);
        
        // æ¸…ç†å®šæ—¶å™¨
        return () => clearInterval(interval);
    }, []);
    
    return <div>è¿è¡Œæ—¶é—´: {seconds}ç§’</div>;
}
                `,
                useContext: `
// useContext Hookç¤ºä¾‹
const ThemeContext = createContext();
const UserContext = createContext();

// ä¸»é¢˜æä¾›è€…
function ThemeProvider({ children }) {
    const [theme, setTheme] = useState('light');
    
    const toggleTheme = () => {
        setTheme(prev => prev === 'light' ? 'dark' : 'light');
    };
    
    return (
        <ThemeContext.Provider value={{ theme, toggleTheme }}>
            {children}
        </ThemeContext.Provider>
    );
}

// ç”¨æˆ·æä¾›è€…
function UserProvider({ children }) {
    const [user, setUser] = useState({
        name: 'æç™½',
        role: 'å­¦ç”Ÿ',
        academy: 'å²³éº“ä¹¦é™¢'
    });
    
    return (
        <UserContext.Provider value={{ user, setUser }}>
            {children}
        </UserContext.Provider>
    );
}

// ä½¿ç”¨Contextçš„ç»„ä»¶
function Header() {
    const { theme, toggleTheme } = useContext(ThemeContext);
    const { user } = useContext(UserContext);
    
    return (
        <header className={\`header header-\${theme}\`}>
            <h1>æ¬¢è¿, {user.name}</h1>
            <p>è§’è‰²: {user.role} | ä¹¦é™¢: {user.academy}</p>
            <button onClick={toggleTheme}>
                åˆ‡æ¢åˆ°{theme === 'light' ? 'æ·±è‰²' : 'æµ…è‰²'}ä¸»é¢˜
            </button>
        </header>
    );
}

function StudentCard() {
    const { theme } = useContext(ThemeContext);
    const { user } = useContext(UserContext);
    
    return (
        <div className={\`card card-\${theme}\`}>
            <h3>{user.name}çš„å­¦ä¹ æ¡£æ¡ˆ</h3>
            <p>å½“å‰ä¸»é¢˜: {theme}</p>
        </div>
    );
}

// åº”ç”¨æ ¹ç»„ä»¶
function App() {
    return (
        <ThemeProvider>
            <UserProvider>
                <Header />
                <StudentCard />
            </UserProvider>
        </ThemeProvider>
    );
}
                `,
                useReducer: `
// useReducer Hookç¤ºä¾‹
const initialState = {
    students: [],
    loading: false,
    error: null,
    selectedStudent: null
};

function studentReducer(state, action) {
    switch (action.type) {
        case 'FETCH_START':
            return {
                ...state,
                loading: true,
                error: null
            };
            
        case 'FETCH_SUCCESS':
            return {
                ...state,
                loading: false,
                students: action.payload
            };
            
        case 'FETCH_ERROR':
            return {
                ...state,
                loading: false,
                error: action.payload
            };
            
        case 'ADD_STUDENT':
            return {
                ...state,
                students: [...state.students, action.payload]
            };
            
        case 'REMOVE_STUDENT':
            return {
                ...state,
                students: state.students.filter(s => s.id !== action.payload)
            };
            
        case 'SELECT_STUDENT':
            return {
                ...state,
                selectedStudent: action.payload
            };
            
        case 'UPDATE_STUDENT':
            return {
                ...state,
                students: state.students.map(student =>
                    student.id === action.payload.id
                        ? { ...student, ...action.payload.updates }
                        : student
                )
            };
            
        default:
            return state;
    }
}

function StudentManager() {
    const [state, dispatch] = useReducer(studentReducer, initialState);
    
    const addStudent = (student) => {
        dispatch({
            type: 'ADD_STUDENT',
            payload: {
                id: Date.now(),
                ...student
            }
        });
    };
    
    const removeStudent = (id) => {
        dispatch({ type: 'REMOVE_STUDENT', payload: id });
    };
    
    const selectStudent = (student) => {
        dispatch({ type: 'SELECT_STUDENT', payload: student });
    };
    
    return (
        <div>
            <h3>å­¦ç”Ÿç®¡ç† (useReducer)</h3>
            
            {state.loading && <div>åŠ è½½ä¸­...</div>}
            {state.error && <div>é”™è¯¯: {state.error}</div>}
            
            <div>
                {state.students.map(student => (
                    <div 
                        key={student.id}
                        className={\`student-item \${state.selectedStudent?.id === student.id ? 'selected' : ''}\`}
                        onClick={() => selectStudent(student)}
                    >
                        <h4>{student.name}</h4>
                        <p>{student.course}</p>
                        <button onClick={(e) => {
                            e.stopPropagation();
                            removeStudent(student.id);
                        }}>
                            åˆ é™¤
                        </button>
                    </div>
                ))}
            </div>
            
            <button onClick={() => addStudent({
                name: \`å­¦ç”Ÿ\${state.students.length + 1}\`,
                course: 'è¯—è¯åˆ›ä½œ',
                age: 20
            })}>
                æ·»åŠ å­¦ç”Ÿ
            </button>
        </div>
    );
}
                `,
                useMemo: `
// useMemo Hookç¤ºä¾‹
function StudentStatistics({ students }) {
    // æ˜‚è´µçš„è®¡ç®—ï¼Œåªåœ¨studentså˜åŒ–æ—¶é‡æ–°è®¡ç®—
    const statistics = useMemo(() => {
        console.log('é‡æ–°è®¡ç®—ç»Ÿè®¡æ•°æ®...');
        
        const totalStudents = students.length;
        const averageAge = students.reduce((sum, s) => sum + s.age, 0) / totalStudents;
        const courseDistribution = students.reduce((acc, student) => {
            acc[student.course] = (acc[student.course] || 0) + 1;
            return acc;
        }, {});
        
        const topCourse = Object.entries(courseDistribution)
            .sort(([,a], [,b]) => b - a)[0];
        
        return {
            totalStudents,
            averageAge: averageAge.toFixed(1),
            courseDistribution,
            topCourse: topCourse ? topCourse[0] : 'æ— '
        };
    }, [students]); // ä¾èµ–studentsæ•°ç»„
    
    // æ ¼å¼åŒ–æ˜¾ç¤ºæ–‡æœ¬ï¼Œä¾èµ–statistics
    const displayText = useMemo(() => {
        return \`å…±æœ‰\${statistics.totalStudents}åå­¦ç”Ÿï¼Œå¹³å‡å¹´é¾„\${statistics.averageAge}å²\`;
    }, [statistics]);
    
    return (
        <div className="statistics">
            <h3>å­¦ç”Ÿç»Ÿè®¡</h3>
            <p>{displayText}</p>
            <p>æœ€å—æ¬¢è¿è¯¾ç¨‹: {statistics.topCourse}</p>
            
            <h4>è¯¾ç¨‹åˆ†å¸ƒ:</h4>
            <ul>
                {Object.entries(statistics.courseDistribution).map(([course, count]) => (
                    <li key={course}>{course}: {count}äºº</li>
                ))}
            </ul>
        </div>
    );
}

// å¤æ‚è®¡ç®—ç¤ºä¾‹
function FibonacciCalculator() {
    const [number, setNumber] = useState(10);
    const [multiplier, setMultiplier] = useState(1);
    
    // æ–æ³¢é‚£å¥‘è®¡ç®—ï¼ˆæ˜‚è´µæ“ä½œï¼‰
    const fibonacci = useMemo(() => {
        console.log('è®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—...');
        
        const fib = (n) => {
            if (n <= 1) return n;
            return fib(n - 1) + fib(n - 2);
        };
        
        return fib(number);
    }, [number]); // åªåœ¨numberå˜åŒ–æ—¶é‡æ–°è®¡ç®—
    
    // ç®€å•è®¡ç®—ï¼ˆä¸éœ€è¦useMemoï¼‰
    const result = fibonacci * multiplier;
    
    return (
        <div>
            <h3>æ–æ³¢é‚£å¥‘è®¡ç®—å™¨</h3>
            <input 
                type="number" 
                value={number}
                onChange={(e) => setNumber(parseInt(e.target.value))}
                max="40"
            />
            <input 
                type="number" 
                value={multiplier}
                onChange={(e) => setMultiplier(parseInt(e.target.value))}
            />
            <p>ç¬¬{number}ä¸ªæ–æ³¢é‚£å¥‘æ•°: {fibonacci}</p>
            <p>ä¹˜ä»¥{multiplier}çš„ç»“æœ: {result}</p>
        </div>
    );
}
                `,
                useCallback: `
// useCallback Hookç¤ºä¾‹
function StudentList({ students, onStudentUpdate }) {
    const [filter, setFilter] = useState('');
    const [sortBy, setSortBy] = useState('name');
    
    // è¿‡æ»¤å­¦ç”Ÿåˆ—è¡¨
    const filteredStudents = useMemo(() => {
        return students.filter(student => 
            student.name.toLowerCase().includes(filter.toLowerCase()) ||
            student.course.toLowerCase().includes(filter.toLowerCase())
        );
    }, [students, filter]);
    
    // æ’åºå‡½æ•° - ä½¿ç”¨useCallbacké¿å…å­ç»„ä»¶ä¸å¿…è¦çš„é‡æ¸²æŸ“
    const handleSort = useCallback((field) => {
        setSortBy(field);
    }, []); // æ— ä¾èµ–ï¼Œå‡½æ•°æ°¸è¿œä¸å˜
    
    // åˆ é™¤å­¦ç”Ÿ - ä½¿ç”¨useCallback
    const handleDelete = useCallback((studentId) => {
        onStudentUpdate(prev => prev.filter(s => s.id !== studentId));
    }, [onStudentUpdate]);
    
    // æ›´æ–°å­¦ç”Ÿä¿¡æ¯ - ä½¿ç”¨useCallback
    const handleUpdate = useCallback((studentId, updates) => {
        onStudentUpdate(prev => 
            prev.map(student => 
                student.id === studentId 
                    ? { ...student, ...updates }
                    : student
            )
        );
    }, [onStudentUpdate]);
    
    // æ’åºåçš„å­¦ç”Ÿåˆ—è¡¨
    const sortedStudents = useMemo(() => {
        return [...filteredStudents].sort((a, b) => {
            if (sortBy === 'age') {
                return a.age - b.age;
            }
            return a[sortBy].localeCompare(b[sortBy]);
        });
    }, [filteredStudents, sortBy]);
    
    return (
        <div>
            <div className="controls">
                <input 
                    type="text"
                    placeholder="æœç´¢å­¦ç”Ÿ..."
                    value={filter}
                    onChange={(e) => setFilter(e.target.value)}
                />
                <select value={sortBy} onChange={(e) => setSortBy(e.target.value)}>
                    <option value="name">æŒ‰å§“åæ’åº</option>
                    <option value="age">æŒ‰å¹´é¾„æ’åº</option>
                    <option value="course">æŒ‰è¯¾ç¨‹æ’åº</option>
                </select>
            </div>
            
            <div className="student-list">
                {sortedStudents.map(student => (
                    <StudentItem
                        key={student.id}
                        student={student}
                        onDelete={handleDelete}
                        onUpdate={handleUpdate}
                        onSort={handleSort}
                    />
                ))}
            </div>
        </div>
    );
}

// å­ç»„ä»¶ - ä½¿ç”¨React.memoä¼˜åŒ–
const StudentItem = React.memo(function StudentItem({ 
    student, 
    onDelete, 
    onUpdate, 
    onSort 
}) {
    console.log(\`æ¸²æŸ“å­¦ç”Ÿ: \${student.name}\`);
    
    const handleNameChange = useCallback((newName) => {
        onUpdate(student.id, { name: newName });
    }, [student.id, onUpdate]);
    
    return (
        <div className="student-item">
            <input 
                value={student.name}
                onChange={(e) => handleNameChange(e.target.value)}
            />
            <span>{student.age}å²</span>
            <span>{student.course}</span>
            <button onClick={() => onDelete(student.id)}>
                åˆ é™¤
            </button>
        </div>
    );
});

// çˆ¶ç»„ä»¶
function App() {
    const [students, setStudents] = useState([
        { id: 1, name: 'æç™½', age: 20, course: 'è¯—è¯åˆ›ä½œ' },
        { id: 2, name: 'æœç”«', age: 22, course: 'è¯—è¯åˆ›ä½œ' }
    ]);
    
    // ä½¿ç”¨useCallbackåŒ…è£…æ›´æ–°å‡½æ•°
    const handleStudentUpdate = useCallback((updateFn) => {
        setStudents(updateFn);
    }, []);
    
    return (
        <StudentList 
            students={students}
            onStudentUpdate={handleStudentUpdate}
        />
    );
}
                `
            };

            result.innerHTML = hookExamples[hookName] || 'è¯·é€‰æ‹©ä¸€ä¸ªHook';
        }

        function demonstrateHooks() {
            console.log('æ¼”ç¤ºReact Hooks');
        }

        function showCustomHook() {
            const result = document.getElementById('hooksCode');
            result.style.display = 'block';
            result.innerHTML = `
// è‡ªå®šä¹‰Hookç¤ºä¾‹

// 1. æ•°æ®è·å–Hook
function useStudentData(studentId) {
    const [student, setStudent] = useState(null);
    const [loading, setLoading] = useState(true);
    const [error, setError] = useState(null);
    
    useEffect(() => {
        if (!studentId) return;
        
        setLoading(true);
        setError(null);
        
        // æ¨¡æ‹ŸAPIè°ƒç”¨
        const fetchStudent = async () => {
            try {
                const response = await fetch(\`/api/students/\${studentId}\`);
                if (!response.ok) throw new Error('è·å–å¤±è´¥');
                const data = await response.json();
                setStudent(data);
            } catch (err) {
                setError(err.message);
            } finally {
                setLoading(false);
            }
        };
        
        fetchStudent();
    }, [studentId]);
    
    return { student, loading, error };
}

// ä½¿ç”¨è‡ªå®šä¹‰Hook
function StudentProfile({ studentId }) {
    const { student, loading, error } = useStudentData(studentId);
    
    if (loading) return <div>åŠ è½½ä¸­...</div>;
    if (error) return <div>é”™è¯¯: {error}</div>;
    if (!student) return <div>æœªæ‰¾åˆ°å­¦ç”Ÿ</div>;
    
    return (
        <div>
            <h3>{student.name}</h3>
            <p>å¹´é¾„: {student.age}</p>
            <p>è¯¾ç¨‹: {student.course}</p>
        </div>
    );
}

// 2. æœ¬åœ°å­˜å‚¨Hook
function useLocalStorage(key, initialValue) {
    const [storedValue, setStoredValue] = useState(() => {
        try {
            const item = window.localStorage.getItem(key);
            return item ? JSON.parse(item) : initialValue;
        } catch (error) {
            console.error('è¯»å–localStorageå¤±è´¥:', error);
            return initialValue;
        }
    });
    
    const setValue = useCallback((value) => {
        try {
            setStoredValue(value);
            window.localStorage.setItem(key, JSON.stringify(value));
        } catch (error) {
            console.error('å†™å…¥localStorageå¤±è´¥:', error);
        }
    }, [key]);
    
    return [storedValue, setValue];
}

// ä½¿ç”¨æœ¬åœ°å­˜å‚¨Hook
function UserPreferences() {
    const [theme, setTheme] = useLocalStorage('theme', 'light');
    const [language, setLanguage] = useLocalStorage('language', 'zh');
    
    return (
        <div>
            <h3>ç”¨æˆ·åå¥½è®¾ç½®</h3>
            <label>
                ä¸»é¢˜:
                <select value={theme} onChange={(e) => setTheme(e.target.value)}>
                    <option value="light">æµ…è‰²</option>
                    <option value="dark">æ·±è‰²</option>
                </select>
            </label>
            <label>
                è¯­è¨€:
                <select value={language} onChange={(e) => setLanguage(e.target.value)}>
                    <option value="zh">ä¸­æ–‡</option>
                    <option value="en">English</option>
                </select>
            </label>
        </div>
    );
}

// 3. çª—å£å¤§å°Hook
function useWindowSize() {
    const [windowSize, setWindowSize] = useState({
        width: window.innerWidth,
        height: window.innerHeight
    });
    
    useEffect(() => {
        const handleResize = () => {
            setWindowSize({
                width: window.innerWidth,
                height: window.innerHeight
            });
        };
        
        window.addEventListener('resize', handleResize);
        return () => window.removeEventListener('resize', handleResize);
    }, []);
    
    return windowSize;
}

// ä½¿ç”¨çª—å£å¤§å°Hook
function ResponsiveComponent() {
    const { width, height } = useWindowSize();
    
    return (
        <div>
            <h3>å“åº”å¼ç»„ä»¶</h3>
            <p>çª—å£å¤§å°: {width} x {height}</p>
            <p>è®¾å¤‡ç±»å‹: {width < 768 ? 'ç§»åŠ¨è®¾å¤‡' : 'æ¡Œé¢è®¾å¤‡'}</p>
        </div>
    );
}

// 4. é˜²æŠ–Hook
function useDebounce(value, delay) {
    const [debouncedValue, setDebouncedValue] = useState(value);
    
    useEffect(() => {
        const handler = setTimeout(() => {
            setDebouncedValue(value);
        }, delay);
        
        return () => {
            clearTimeout(handler);
        };
    }, [value, delay]);
    
    return debouncedValue;
}

// ä½¿ç”¨é˜²æŠ–Hook
function SearchComponent() {
    const [searchTerm, setSearchTerm] = useState('');
    const debouncedSearchTerm = useDebounce(searchTerm, 500);
    const [results, setResults] = useState([]);
    
    useEffect(() => {
        if (debouncedSearchTerm) {
            // æ‰§è¡Œæœç´¢
            console.log('æœç´¢:', debouncedSearchTerm);
            // æ¨¡æ‹Ÿæœç´¢APIè°ƒç”¨
        }
    }, [debouncedSearchTerm]);
    
    return (
        <div>
            <input 
                type="text"
                value={searchTerm}
                onChange={(e) => setSearchTerm(e.target.value)}
                placeholder="æœç´¢å­¦ç”Ÿ..."
            />
            <p>æœç´¢è¯: {debouncedSearchTerm}</p>
        </div>
    );
}
            `;
        }

        function showHookRules() {
            const result = document.getElementById('hooksCode');
            result.style.display = 'block';
            result.innerHTML = `
// React Hooksä½¿ç”¨è§„åˆ™

// âœ… æ­£ç¡®çš„Hookä½¿ç”¨
function GoodComponent() {
    // 1. åªåœ¨å‡½æ•°ç»„ä»¶é¡¶å±‚è°ƒç”¨Hook
    const [count, setCount] = useState(0);
    const [name, setName] = useState('');
    
    // 2. Hookè°ƒç”¨é¡ºåºä¿æŒä¸€è‡´
    useEffect(() => {
        document.title = \`è®¡æ•°: \${count}\`;
    }, [count]);
    
    const memoizedValue = useMemo(() => {
        return count * 2;
    }, [count]);
    
    return (
        <div>
            <h3>{name}</h3>
            <p>è®¡æ•°: {count}</p>
            <p>åŒå€: {memoizedValue}</p>
            <button onClick={() => setCount(count + 1)}>å¢åŠ </button>
        </div>
    );
}

// âŒ é”™è¯¯çš„Hookä½¿ç”¨
function BadComponent({ shouldShowCount }) {
    const [name, setName] = useState('');
    
    // âŒ é”™è¯¯ï¼šåœ¨æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨Hook
    if (shouldShowCount) {
        const [count, setCount] = useState(0); // è¿™æ˜¯é”™è¯¯çš„ï¼
    }
    
    // âŒ é”™è¯¯ï¼šåœ¨å¾ªç¯ä¸­è°ƒç”¨Hook
    for (let i = 0; i < 3; i++) {
        const [value, setValue] = useState(i); // è¿™æ˜¯é”™è¯¯çš„ï¼
    }
    
    // âŒ é”™è¯¯ï¼šåœ¨åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨Hook
    const handleClick = () => {
        const [clicked, setClicked] = useState(false); // è¿™æ˜¯é”™è¯¯çš„ï¼
    };
    
    return <div>{name}</div>;
}

// âœ… æ­£ç¡®çš„æ¡ä»¶é€»è¾‘
function ConditionalComponent({ shouldShowCount }) {
    const [name, setName] = useState('');
    const [count, setCount] = useState(0); // æ€»æ˜¯è°ƒç”¨
    
    return (
        <div>
            <h3>{name}</h3>
            {shouldShowCount && ( // æ¡ä»¶æ¸²æŸ“åœ¨JSXä¸­
                <div>
                    <p>è®¡æ•°: {count}</p>
                    <button onClick={() => setCount(count + 1)}>å¢åŠ </button>
                </div>
            )}
        </div>
    );
}

// Hookè§„åˆ™æ€»ç»“:
// 1. åªåœ¨Reactå‡½æ•°ç»„ä»¶æˆ–è‡ªå®šä¹‰Hookä¸­è°ƒç”¨Hook
// 2. åªåœ¨å‡½æ•°é¡¶å±‚è°ƒç”¨Hookï¼Œä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶æˆ–åµŒå¥—å‡½æ•°ä¸­è°ƒç”¨
// 3. Hookçš„è°ƒç”¨é¡ºåºå¿…é¡»ä¿æŒä¸€è‡´
// 4. è‡ªå®šä¹‰Hookå¿…é¡»ä»¥"use"å¼€å¤´

// âœ… æ­£ç¡®çš„è‡ªå®šä¹‰Hook
function useCounter(initialValue = 0) {
    const [count, setCount] = useState(initialValue);
    
    const increment = useCallback(() => {
        setCount(prev => prev + 1);
    }, []);
    
    const decrement = useCallback(() => {
        setCount(prev => prev - 1);
    }, []);
    
    const reset = useCallback(() => {
        setCount(initialValue);
    }, [initialValue]);
    
    return { count, increment, decrement, reset };
}

// âŒ é”™è¯¯ï¼šä¸æ˜¯Hookä½†ä»¥useå¼€å¤´
function useNotAHook() {
    // è¿™ä¸æ˜¯Hookï¼Œå› ä¸ºæ²¡æœ‰è°ƒç”¨å…¶ä»–Hook
    return "è¿™ä¸æ˜¯Hook";
}

// âœ… æ­£ç¡®ï¼šæ™®é€šå‡½æ•°
function createHelper() {
    return "è¿™æ˜¯æ™®é€šå‡½æ•°";
}

// Hookä¾èµ–æ•°ç»„è§„åˆ™:
// 1. åŒ…å«æ‰€æœ‰åœ¨effectä¸­ä½¿ç”¨çš„ç»„ä»¶ä½œç”¨åŸŸå†…çš„å€¼
// 2. ä¸è¦æ’’è°å…³äºä¾èµ–

// âŒ é”™è¯¯ï¼šç¼ºå°‘ä¾èµ–
function BadEffect({ userId }) {
    const [user, setUser] = useState(null);
    
    useEffect(() => {
        fetchUser(userId).then(setUser); // ä½¿ç”¨äº†userIdä½†æ²¡æœ‰åœ¨ä¾èµ–ä¸­å£°æ˜
    }, []); // é”™è¯¯ï¼šç¼ºå°‘userIdä¾èµ–
    
    return <div>{user?.name}</div>;
}

// âœ… æ­£ç¡®ï¼šåŒ…å«æ‰€æœ‰ä¾èµ–
function GoodEffect({ userId }) {
    const [user, setUser] = useState(null);
    
    useEffect(() => {
        fetchUser(userId).then(setUser);
    }, [userId]); // æ­£ç¡®ï¼šåŒ…å«userIdä¾èµ–
    
    return <div>{user?.name}</div>;
}
            `;
        }

        function toggleCode(codeId) {
            const codeElement = document.getElementById(codeId);
            if (codeElement) {
                codeElement.style.display = codeElement.style.display === 'none' ? 'block' : 'none';
            }
        }
    </script>
</body>

</html>