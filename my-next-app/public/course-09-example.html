<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TypeScriptç±»å‹ç³»ç»Ÿå®ä¾‹ - å¤ä»£å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ</title>
    <style>
        body {
            font-family: "Microsoft YaHei", Arial, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #2c3e50;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #8e44ad;
            padding-bottom: 15px;
            margin-bottom: 30px;
            font-size: 2.8em;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .library-header {
            background: linear-gradient(45deg, #8e44ad, #9b59b6, #3498db, #2980b9);
            background-size: 400% 400%;
            animation: gradientShift 8s ease infinite;
            color: white;
            padding: 25px;
            text-align: center;
            border-radius: 15px;
            margin: 20px 0;
            font-weight: bold;
            font-size: 1.4em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .type-demo {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .interface-demo {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .generic-demo {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .enum-demo {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .class-demo {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .code-display {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
            font-size: 0.9em;
            white-space: pre-wrap;
        }

        .type-example {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .type-example:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(10px);
        }

        .type-result {
            background: rgba(0, 0, 0, 0.2);
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .control-panel {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
        }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn.success {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
        }

        .btn.warning {
            background: linear-gradient(135deg, #f39c12, #e67e22);
        }

        .btn.danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .btn.purple {
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
        }

        .knowledge-point {
            background: #f8f9fa;
            border-left: 4px solid #8e44ad;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 10px 10px 0;
        }

        .cultural-info {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
            text-align: center;
        }

        .section-title {
            color: #8e44ad;
            margin-top: 40px;
            padding-left: 15px;
            border-left: 5px solid #8e44ad;
            font-size: 1.5em;
        }

        .book-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .book-card:hover {
            background: rgba(255, 255, 255, 0.3);
            border-color: rgba(255, 255, 255, 0.5);
            transform: scale(1.02);
        }

        .book-card.selected {
            background: rgba(255, 255, 255, 0.4);
            border-color: #f1c40f;
        }

        .type-checker {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }

        .type-input {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 1em;
            margin: 5px 0;
            background: #34495e;
            color: #ecf0f1;
        }

        .type-output {
            background: #27ae60;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
            min-height: 50px;
        }

        .type-error {
            background: #e74c3c;
            color: white;
            padding: 10px;
            border-radius: 5px;
            margin: 5px 0;
        }

        .library-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.2);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-5px);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #f1c40f;
        }

        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #fff;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        .type-annotation {
            color: #f39c12;
            font-weight: bold;
        }

        .keyword {
            color: #e74c3c;
            font-weight: bold;
        }

        .string-literal {
            color: #27ae60;
        }

        .number-literal {
            color: #3498db;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>TypeScriptç±»å‹ç³»ç»Ÿå®ä¾‹ - å¤ä»£å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ</h1>

        <div class="library-header">
            ğŸ“š æ¢ç´¢å¤ä»£è—ä¹¦é˜çš„æ™ºæ…§ä¸ç°ä»£TypeScriptç±»å‹ç³»ç»Ÿ ğŸ“š
        </div>

        <div class="knowledge-point">
            <strong>å­¦ä¹ é‡ç‚¹ï¼š</strong>æœ¬é¡µé¢å±•ç¤ºTypeScriptçš„ç±»å‹æ³¨è§£ã€æ¥å£å®šä¹‰ã€æ³›å‹ç¼–ç¨‹ã€æšä¸¾ç±»å‹å’Œç±»çš„ä½¿ç”¨
        </div>

        <h2 class="section-title">ğŸ·ï¸ åŸºç¡€ç±»å‹ç³»ç»Ÿ - å›¾ä¹¦åˆ†ç±»</h2>
        <div class="type-demo">
            <h4>ğŸ“– å›¾ä¹¦åŸºç¡€ç±»å‹å®šä¹‰</h4>
            <div class="type-example" onclick="showTypeExample('basic')">
                ç‚¹å‡»æŸ¥çœ‹åŸºç¡€ç±»å‹ç¤ºä¾‹
            </div>
            <div class="type-result" id="basicTypeResult"></div>
            <div class="control-panel">
                <button class="btn" onclick="testBasicTypes()">æµ‹è¯•åŸºç¡€ç±»å‹</button>
                <button class="btn success" onclick="validateTypes()">ç±»å‹éªŒè¯</button>
                <button class="btn warning" onclick="showTypeErrors()">æ˜¾ç¤ºç±»å‹é”™è¯¯</button>
            </div>
            <div class="code-display" id="basicTypeCode" style="display: none;"></div>
            <button class="btn" onclick="toggleCode('basicTypeCode')">æŸ¥çœ‹åŸºç¡€ç±»å‹ä»£ç </button>
        </div>

        <h2 class="section-title">ğŸ›ï¸ æ¥å£å®šä¹‰ - å›¾ä¹¦é¦†è§„èŒƒ</h2>
        <div class="interface-demo">
            <h4>ğŸ“‹ å›¾ä¹¦é¦†æ¥å£è§„èŒƒ</h4>
            <div class="library-stats">
                <div class="stat-card" onclick="showInterface('book')">
                    <div class="stat-number">ğŸ“š</div>
                    <div>å›¾ä¹¦æ¥å£</div>
                </div>
                <div class="stat-card" onclick="showInterface('reader')">
                    <div class="stat-number">ğŸ‘¤</div>
                    <div>è¯»è€…æ¥å£</div>
                </div>
                <div class="stat-card" onclick="showInterface('librarian')">
                    <div class="stat-number">ğŸ‘¨â€ğŸ«</div>
                    <div>ç®¡ç†å‘˜æ¥å£</div>
                </div>
                <div class="stat-card" onclick="showInterface('library')">
                    <div class="stat-number">ğŸ›ï¸</div>
                    <div>å›¾ä¹¦é¦†æ¥å£</div>
                </div>
            </div>
            <div class="type-result" id="interfaceResult"></div>
            <div class="control-panel">
                <button class="btn" onclick="createBookInstance()">åˆ›å»ºå›¾ä¹¦å®ä¾‹</button>
                <button class="btn success" onclick="validateInterface()">æ¥å£éªŒè¯</button>
                <button class="btn danger" onclick="showInterfaceError()">æ¥å£é”™è¯¯ç¤ºä¾‹</button>
            </div>
            <div class="code-display" id="interfaceCode" style="display: none;"></div>
            <button class="btn" onclick="toggleCode('interfaceCode')">æŸ¥çœ‹æ¥å£ä»£ç </button>
        </div>

        <h2 class="section-title">ğŸ”„ æ³›å‹ç¼–ç¨‹ - é€šç”¨å›¾ä¹¦ç®¡ç†</h2>
        <div class="generic-demo">
            <h4>ğŸ”§ æ³›å‹å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ</h4>
            <div class="type-checker">
                <div>æ³›å‹ç±»å‹æ£€æŸ¥å™¨ï¼š</div>
                <input type="text" class="type-input" id="genericInput" placeholder="è¾“å…¥æ³›å‹è¡¨è¾¾å¼ï¼Œå¦‚ï¼šArray<Book>"
                    onkeypress="handleGenericEnter(event)">
                <div class="type-output" id="genericOutput">ç­‰å¾…è¾“å…¥æ³›å‹è¡¨è¾¾å¼...</div>
            </div>
            <div class="control-panel">
                <button class="btn" onclick="testGenericArray()">æ³›å‹æ•°ç»„</button>
                <button class="btn success" onclick="testGenericFunction()">æ³›å‹å‡½æ•°</button>
                <button class="btn warning" onclick="testGenericClass()">æ³›å‹ç±»</button>
                <button class="btn purple" onclick="testGenericConstraints()">æ³›å‹çº¦æŸ</button>
            </div>
            <div class="type-result" id="genericResult"></div>
            <div class="code-display" id="genericCode" style="display: none;"></div>
            <button class="btn" onclick="toggleCode('genericCode')">æŸ¥çœ‹æ³›å‹ä»£ç </button>
        </div>

        <h2 class="section-title">ğŸ“Š æšä¸¾ç±»å‹ - å›¾ä¹¦çŠ¶æ€ç®¡ç†</h2>
        <div class="enum-demo">
            <h4>ğŸ“ˆ å›¾ä¹¦çŠ¶æ€æšä¸¾</h4>
            <div class="library-stats">
                <div class="stat-card" onclick="showEnumValue('available')">
                    <div class="stat-number">âœ…</div>
                    <div>å¯å€Ÿé˜…</div>
                </div>
                <div class="stat-card" onclick="showEnumValue('borrowed')">
                    <div class="stat-number">ğŸ“¤</div>
                    <div>å·²å€Ÿå‡º</div>
                </div>
                <div class="stat-card" onclick="showEnumValue('reserved')">
                    <div class="stat-number">ğŸ”’</div>
                    <div>å·²é¢„çº¦</div>
                </div>
                <div class="stat-card" onclick="showEnumValue('maintenance')">
                    <div class="stat-number">ğŸ”§</div>
                    <div>ç»´æŠ¤ä¸­</div>
                </div>
            </div>
            <div class="type-result" id="enumResult"></div>
            <div class="control-panel">
                <button class="btn" onclick="testStringEnum()">å­—ç¬¦ä¸²æšä¸¾</button>
                <button class="btn success" onclick="testNumericEnum()">æ•°å­—æšä¸¾</button>
                <button class="btn warning" onclick="testConstEnum()">å¸¸é‡æšä¸¾</button>
            </div>
            <div class="code-display" id="enumCode" style="display: none;"></div>
            <button class="btn" onclick="toggleCode('enumCode')">æŸ¥çœ‹æšä¸¾ä»£ç </button>
        </div>

        <h2 class="section-title">ğŸ—ï¸ ç±»ä¸ç»§æ‰¿ - å›¾ä¹¦é¦†ç»„ç»‡æ¶æ„</h2>
        <div class="class-demo">
            <h4>ğŸ›ï¸ å›¾ä¹¦é¦†ç±»å±‚æ¬¡ç»“æ„</h4>
            <div class="type-result" id="classResult"></div>
            <div class="control-panel">
                <button class="btn" onclick="createLibraryClass()">åˆ›å»ºå›¾ä¹¦é¦†ç±»</button>
                <button class="btn success" onclick="testInheritance()">æµ‹è¯•ç»§æ‰¿</button>
                <button class="btn warning" onclick="testAbstractClass()">æŠ½è±¡ç±»</button>
                <button class="btn purple" onclick="testAccessModifiers()">è®¿é—®ä¿®é¥°ç¬¦</button>
            </div>
            <div class="code-display" id="classCode" style="display: none;"></div>
            <button class="btn" onclick="toggleCode('classCode')">æŸ¥çœ‹ç±»ä»£ç </button>
        </div>

        <div class="cultural-info">
            <h3>ğŸ“š ä¸­å›½å¤ä»£å›¾ä¹¦é¦†æ–‡åŒ–</h3>
            <p><strong>è—ä¹¦é˜ï¼š</strong>å¤ä»£çš‡å®¶å’Œç§äººè—ä¹¦çš„é‡è¦åœºæ‰€ï¼Œå¦‚æ–‡æ¸Šé˜ã€å››åº“å…¨ä¹¦ç­‰ã€‚</p>
            <p><strong>åˆ†ç±»ä½“ç³»ï¼š</strong>å¤ä»£å›¾ä¹¦æŒ‰ç»ã€å²ã€å­ã€é›†å››éƒ¨åˆ†ç±»ï¼Œä½“ç°äº†ç³»ç»ŸåŒ–çš„çŸ¥è¯†ç®¡ç†ã€‚</p>
            <p><strong>ç›®å½•å­¦ï¼š</strong>ä¸­å›½å¤ä»£å‘è¾¾çš„ç›®å½•å­¦ä¼ ç»Ÿï¼Œä¸ºå›¾ä¹¦ç®¡ç†æä¾›äº†ç§‘å­¦æ–¹æ³•ã€‚</p>
            <p><strong>ä¹¦é™¢åˆ¶åº¦ï¼š</strong>å¤ä»£æ•™è‚²æœºæ„çš„å›¾ä¹¦ç®¡ç†ï¼Œä¿ƒè¿›äº†çŸ¥è¯†çš„ä¼ æ‰¿å’Œå‘å±•ã€‚</p>
        </div>

        <div class="knowledge-point">
            <strong>æŠ€æœ¯æ€»ç»“ï¼š</strong>æœ¬é¡µé¢é€šè¿‡å¤ä»£å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿå±•ç¤ºäº†TypeScriptçš„æ ¸å¿ƒç‰¹æ€§ï¼š
            <br>â€¢ <strong>ç±»å‹æ³¨è§£ï¼š</strong>ä¸ºå˜é‡ã€å‡½æ•°å‚æ•°å’Œè¿”å›å€¼æ·»åŠ ç±»å‹ä¿¡æ¯
            <br>â€¢ <strong>æ¥å£å®šä¹‰ï¼š</strong>å®šä¹‰å¯¹è±¡çš„ç»“æ„å’Œå¥‘çº¦ï¼Œç¡®ä¿ç±»å‹å®‰å…¨
            <br>â€¢ <strong>æ³›å‹ç¼–ç¨‹ï¼š</strong>ç¼–å†™å¯é‡ç”¨çš„ç»„ä»¶ï¼Œæ”¯æŒå¤šç§ç±»å‹
            <br>â€¢ <strong>æšä¸¾ç±»å‹ï¼š</strong>å®šä¹‰å‘½åå¸¸é‡é›†åˆï¼Œæé«˜ä»£ç å¯è¯»æ€§
            <br>â€¢ <strong>ç±»ä¸ç»§æ‰¿ï¼š</strong>é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œæ”¯æŒå°è£…ã€ç»§æ‰¿å’Œå¤šæ€
            <br>â€¢ <strong>ç±»å‹æ£€æŸ¥ï¼š</strong>ç¼–è¯‘æ—¶ç±»å‹éªŒè¯ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
        </div>
    </div>

    <script>
        // æ¨¡æ‹ŸTypeScriptç±»å‹ç³»ç»Ÿ
        const TypeSystem = {
            // åŸºç¡€ç±»å‹
            basicTypes: {
                string: 'string',
                number: 'number',
                boolean: 'boolean',
                array: 'Array<T>',
                object: 'object',
                null: 'null',
                undefined: 'undefined',
                any: 'any',
                void: 'void',
                never: 'never'
            },

            // æ¥å£å®šä¹‰
            interfaces: {
                Book: {
                    id: 'number',
                    title: 'string',
                    author: 'string',
                    category: 'BookCategory',
                    status: 'BookStatus',
                    publishYear: 'number',
                    isbn?: 'string'
                },
                Reader: {
                    id: 'number',
                    name: 'string',
                    email: 'string',
                    borrowedBooks: 'Book[]',
                    membershipType: 'MembershipType'
                },
                Librarian: {
                    id: 'number',
                    name: 'string',
                    department: 'string',
                    permissions: 'Permission[]'
                },
                Library: {
                    name: 'string',
                    books: 'Book[]',
                    readers: 'Reader[]',
                    librarians: 'Librarian[]'
                }
            },

            // æšä¸¾ç±»å‹
            enums: {
                BookStatus: {
                    Available: 'available',
                    Borrowed: 'borrowed',
                    Reserved: 'reserved',
                    Maintenance: 'maintenance'
                },
                BookCategory: {
                    Classic: 'classic',
                    History: 'history',
                    Philosophy: 'philosophy',
                    Literature: 'literature',
                    Science: 'science'
                },
                MembershipType: {
                    Student: 'student',
                    Teacher: 'teacher',
                    Researcher: 'researcher',
                    Public: 'public'
                }
            }
        };

        function showTypeExample(type) {
            const result = document.getElementById('basicTypeResult');

            if (type === 'basic') {
                result.innerHTML = `
<div class="type-annotation">// åŸºç¡€ç±»å‹ç¤ºä¾‹</div>
<div><span class="keyword">let</span> bookTitle: <span class="type-annotation">string</span> = <span class="string-literal">"è®ºè¯­"</span>;</div>
<div><span class="keyword">let</span> pageCount: <span class="type-annotation">number</span> = <span class="number-literal">256</span>;</div>
<div><span class="keyword">let</span> isAvailable: <span class="type-annotation">boolean</span> = <span class="keyword">true</span>;</div>
<div><span class="keyword">let</span> authors: <span class="type-annotation">string[]</span> = [<span class="string-literal">"å­”å­"</span>, <span class="string-literal">"å¼Ÿå­"</span>];</div>
<div><span class="keyword">let</span> publishDate: <span class="type-annotation">Date</span> = <span class="keyword">new</span> Date();</div>
                `;
            }
        }

        function testBasicTypes() {
            const result = document.getElementById('basicTypeResult');
            result.innerHTML = `<div class="loading-spinner"></div>æ­£åœ¨æµ‹è¯•åŸºç¡€ç±»å‹...`;

            setTimeout(() => {
                result.innerHTML = `
âœ… ç±»å‹æµ‹è¯•é€šè¿‡ï¼š
â€¢ string: "å²è®°" âœ“
â€¢ number: 2000 âœ“
â€¢ boolean: true âœ“
â€¢ Array<string>: ["å¸é©¬è¿"] âœ“
â€¢ Date: ${new Date().toLocaleDateString()} âœ“
                `;
            }, 1000);
        }

        function validateTypes() {
            const result = document.getElementById('basicTypeResult');
            result.innerHTML = `
<div class="type-annotation">ç±»å‹éªŒè¯ç»“æœï¼š</div>
<div style="color: #27ae60;">âœ… æ‰€æœ‰ç±»å‹æ³¨è§£æ­£ç¡®</div>
<div style="color: #27ae60;">âœ… ç±»å‹æ¨æ–­æˆåŠŸ</div>
<div style="color: #27ae60;">âœ… ç±»å‹å…¼å®¹æ€§æ£€æŸ¥é€šè¿‡</div>
            `;
        }

        function showTypeErrors() {
            const result = document.getElementById('basicTypeResult');
            result.innerHTML = `
<div class="type-error">âŒ ç±»å‹é”™è¯¯ç¤ºä¾‹ï¼š</div>
<div class="type-error">Type 'string' is not assignable to type 'number'</div>
<div class="type-error">Property 'title' is missing in type '{}'</div>
<div class="type-error">Argument of type 'undefined' is not assignable to parameter of type 'string'</div>
            `;
        }

        function toggleCode(codeId) {
            const codeDisplay = document.getElementById(codeId);
            codeDisplay.style.display = codeDisplay.style.display === 'none' ? 'block' : 'none';

            const codeContent = {
                basicTypeCode: `
// TypeScriptåŸºç¡€ç±»å‹ç¤ºä¾‹

// åŸå§‹ç±»å‹
let bookTitle: string = "è¯—ç»";
let chapterCount: number = 305;
let isClassic: boolean = true;
let publishYear: number = -1000; // å…¬å…ƒå‰1000å¹´

// æ•°ç»„ç±»å‹
let authors: string[] = ["ä½šå", "å­”å­ç¼–è®¢"];
let ratings: Array<number> = [9.5, 9.8, 9.2];

// å¯¹è±¡ç±»å‹
let book: {
    title: string;
    author: string;
    pages: number;
} = {
    title: "é“å¾·ç»",
    author: "è€å­",
    pages: 81
};

// è”åˆç±»å‹
let status: "available" | "borrowed" | "reserved" = "available";

// å¯é€‰å±æ€§
let bookInfo: {
    title: string;
    subtitle?: string; // å¯é€‰å±æ€§
    isbn?: string;
} = {
    title: "å­™å­å…µæ³•"
};

// å‡½æ•°ç±»å‹
let searchBooks: (query: string) => Book[] = function(query) {
    return books.filter(book => book.title.includes(query));
};

// ç±»å‹åˆ«å
type BookID = number;
type BookCollection = Book[];

// å­—é¢é‡ç±»å‹
let category: "ç»" | "å²" | "å­" | "é›†" = "ç»";
                `,
                interfaceCode: `
// TypeScriptæ¥å£å®šä¹‰ç¤ºä¾‹

// åŸºç¡€æ¥å£
interface Book {
    readonly id: number;        // åªè¯»å±æ€§
    title: string;
    author: string;
    category: BookCategory;
    status: BookStatus;
    publishYear: number;
    isbn?: string;              // å¯é€‰å±æ€§
    tags?: string[];
}

// è¯»è€…æ¥å£
interface Reader {
    id: number;
    name: string;
    email: string;
    borrowedBooks: Book[];
    membershipType: MembershipType;
    borrowBook(book: Book): boolean;
    returnBook(bookId: number): boolean;
}

// ç®¡ç†å‘˜æ¥å£
interface Librarian extends Reader {
    department: string;
    permissions: Permission[];
    addBook(book: Book): void;
    removeBook(bookId: number): void;
    updateBookStatus(bookId: number, status: BookStatus): void;
}

// å›¾ä¹¦é¦†æ¥å£
interface Library {
    name: string;
    address: string;
    books: Map<number, Book>;
    readers: Map<number, Reader>;
    librarians: Librarian[];
    
    // æ–¹æ³•ç­¾å
    searchBooks(query: string): Book[];
    registerReader(reader: Omit<Reader, 'id'>): number;
    borrowBook(readerId: number, bookId: number): boolean;
    returnBook(readerId: number, bookId: number): boolean;
}

// æ¥å£ç»§æ‰¿
interface DigitalBook extends Book {
    fileFormat: 'PDF' | 'EPUB' | 'MOBI';
    fileSize: number;
    downloadUrl: string;
}

// å‡½æ•°æ¥å£
interface SearchFunction {
    (query: string, category?: BookCategory): Book[];
}

// ç´¢å¼•ç­¾å
interface BookCatalog {
    [category: string]: Book[];
}
                `,
                genericCode: `
// TypeScriptæ³›å‹ç¼–ç¨‹ç¤ºä¾‹

// æ³›å‹å‡½æ•°
function findById<T extends { id: number }>(items: T[], id: number): T | undefined {
    return items.find(item => item.id === id);
}

// ä½¿ç”¨æ³›å‹å‡½æ•°
const book = findById<Book>(books, 1);
const reader = findById<Reader>(readers, 100);

// æ³›å‹æ¥å£
interface Repository<T> {
    items: T[];
    add(item: T): void;
    remove(id: number): boolean;
    findById(id: number): T | undefined;
    findAll(): T[];
}

// æ³›å‹ç±»
class LibraryRepository<T extends { id: number }> implements Repository<T> {
    items: T[] = [];
    
    add(item: T): void {
        this.items.push(item);
    }
    
    remove(id: number): boolean {
        const index = this.items.findIndex(item => item.id === id);
        if (index > -1) {
            this.items.splice(index, 1);
            return true;
        }
        return false;
    }
    
    findById(id: number): T | undefined {
        return this.items.find(item => item.id === id);
    }
    
    findAll(): T[] {
        return [...this.items];
    }
}

// æ³›å‹çº¦æŸ
interface Searchable {
    title: string;
    author: string;
}

function searchItems<T extends Searchable>(items: T[], query: string): T[] {
    return items.filter(item => 
        item.title.includes(query) || item.author.includes(query)
    );
}

// æ¡ä»¶ç±»å‹
type ApiResponse<T> = T extends string 
    ? { message: T } 
    : T extends number 
    ? { code: T } 
    : { data: T };

// æ˜ å°„ç±»å‹
type PartialBook = Partial<Book>;           // æ‰€æœ‰å±æ€§å¯é€‰
type RequiredBook = Required<Book>;         // æ‰€æœ‰å±æ€§å¿…éœ€
type BookTitles = Pick<Book, 'title' | 'author'>;  // é€‰æ‹©ç‰¹å®šå±æ€§
type BookWithoutId = Omit<Book, 'id'>;     // æ’é™¤ç‰¹å®šå±æ€§

// å·¥å…·ç±»å‹
type BookKeys = keyof Book;                 // è·å–æ‰€æœ‰é”®
type BookValues = Book[keyof Book];         // è·å–æ‰€æœ‰å€¼ç±»å‹
                `,
                enumCode: `
// TypeScriptæšä¸¾ç±»å‹ç¤ºä¾‹

// æ•°å­—æšä¸¾
enum BookStatus {
    Available,      // 0
    Borrowed,       // 1
    Reserved,       // 2
    Maintenance     // 3
}

// å­—ç¬¦ä¸²æšä¸¾
enum BookCategory {
    Classic = "classic",
    History = "history",
    Philosophy = "philosophy",
    Literature = "literature",
    Science = "science"
}

// å¼‚æ„æšä¸¾ï¼ˆæ··åˆç±»å‹ï¼‰
enum MembershipType {
    Student = "student",
    Teacher = "teacher",
    VIP = 1,
    Premium = 2
}

// å¸¸é‡æšä¸¾
const enum Permission {
    Read = "read",
    Write = "write",
    Delete = "delete",
    Admin = "admin"
}

// è®¡ç®—æšä¸¾æˆå‘˜
enum FileSize {
    KB = 1024,
    MB = KB * 1024,
    GB = MB * 1024
}

// æšä¸¾çš„ä½¿ç”¨
function updateBookStatus(bookId: number, status: BookStatus): void {
    console.log(\`æ›´æ–°å›¾ä¹¦ \${bookId} çŠ¶æ€ä¸º: \${BookStatus[status]}\`);
}

// åå‘æ˜ å°„ï¼ˆä»…æ•°å­—æšä¸¾ï¼‰
console.log(BookStatus.Available);  // 0
console.log(BookStatus[0]);         // "Available"

// æšä¸¾ä½œä¸ºç±»å‹
function categorizeBook(book: Book, category: BookCategory): void {
    book.category = category;
}

// æšä¸¾å€¼æ£€æŸ¥
function isValidStatus(status: string): status is keyof typeof BookStatus {
    return status in BookStatus;
}

// æšä¸¾éå†
function getAllStatuses(): string[] {
    return Object.keys(BookStatus).filter(key => isNaN(Number(key)));
}
                `,
                classCode: `
// TypeScriptç±»ä¸ç»§æ‰¿ç¤ºä¾‹

// æŠ½è±¡åŸºç±»
abstract class LibraryItem {
    protected readonly id: number;
    protected title: string;
    protected createdAt: Date;
    
    constructor(id: number, title: string) {
        this.id = id;
        this.title = title;
        this.createdAt = new Date();
    }
    
    // æŠ½è±¡æ–¹æ³•
    abstract getInfo(): string;
    
    // å…·ä½“æ–¹æ³•
    getId(): number {
        return this.id;
    }
    
    getTitle(): string {
        return this.title;
    }
}

// å›¾ä¹¦ç±»
class Book extends LibraryItem {
    private author: string;
    private isbn: string;
    private status: BookStatus;
    
    constructor(id: number, title: string, author: string, isbn: string) {
        super(id, title);
        this.author = author;
        this.isbn = isbn;
        this.status = BookStatus.Available;
    }
    
    // å®ç°æŠ½è±¡æ–¹æ³•
    getInfo(): string {
        return \`ã€Š\${this.title}ã€‹ - \${this.author}\`;
    }
    
    // Getterå’ŒSetter
    get bookStatus(): BookStatus {
        return this.status;
    }
    
    set bookStatus(status: BookStatus) {
        this.status = status;
    }
    
    // é™æ€æ–¹æ³•
    static createFromData(data: any): Book {
        return new Book(data.id, data.title, data.author, data.isbn);
    }
}

// äººå‘˜åŸºç±»
class Person {
    protected name: string;
    protected email: string;
    
    constructor(name: string, email: string) {
        this.name = name;
        this.email = email;
    }
    
    getName(): string {
        return this.name;
    }
}

// è¯»è€…ç±»
class Reader extends Person {
    private borrowedBooks: Book[] = [];
    private membershipType: MembershipType;
    
    constructor(name: string, email: string, membershipType: MembershipType) {
        super(name, email);
        this.membershipType = membershipType;
    }
    
    borrowBook(book: Book): boolean {
        if (book.bookStatus === BookStatus.Available) {
            this.borrowedBooks.push(book);
            book.bookStatus = BookStatus.Borrowed;
            return true;
        }
        return false;
    }
    
    returnBook(book: Book): boolean {
        const index = this.borrowedBooks.indexOf(book);
        if (index > -1) {
            this.borrowedBooks.splice(index, 1);
            book.bookStatus = BookStatus.Available;
            return true;
        }
        return false;
    }
}

// ç®¡ç†å‘˜ç±»
class Librarian extends Reader {
    private department: string;
    private permissions: Permission[];
    
    constructor(name: string, email: string, department: string) {
        super(name, email, MembershipType.Teacher);
        this.department = department;
        this.permissions = [Permission.Read, Permission.Write];
    }
    
    addBook(book: Book): void {
        if (this.hasPermission(Permission.Write)) {
            console.log(\`ç®¡ç†å‘˜ \${this.name} æ·»åŠ äº†å›¾ä¹¦: \${book.getInfo()}\`);
        }
    }
    
    private hasPermission(permission: Permission): boolean {
        return this.permissions.includes(permission);
    }
}

// å›¾ä¹¦é¦†ç±»
class Library {
    private books: Map<number, Book> = new Map();
    private readers: Map<number, Reader> = new Map();
    private librarians: Librarian[] = [];
    
    addBook(book: Book): void {
        this.books.set(book.getId(), book);
    }
    
    findBook(id: number): Book | undefined {
        return this.books.get(id);
    }
    
    searchBooks(query: string): Book[] {
        return Array.from(this.books.values())
            .filter(book => book.getTitle().includes(query));
    }
}
                `
            };

            if (codeContent[codeId]) {
                codeDisplay.innerHTML = codeContent[codeId];
            }
        }

        function showInterface(type) {
            const result = document.getElementById('interfaceResult');
            const interfaces = {
                book: `
interface Book {
    readonly id: number;
    title: string;
    author: string;
    category: BookCategory;
    status: BookStatus;
    publishYear: number;
    isbn?: string;
}
                `,
                reader: `
interface Reader {
    id: number;
    name: string;
    email: string;
    borrowedBooks: Book[];
    membershipType: MembershipType;
    borrowBook(book: Book): boolean;
    returnBook(bookId: number): boolean;
}
                `,
                librarian: `
interface Librarian extends Reader {
    department: string;
    permissions: Permission[];
    addBook(book: Book): void;
    removeBook(bookId: number): void;
    updateBookStatus(bookId: number, status: BookStatus): void;
}
                `,
                library: `
interface Library {
    name: string;
    books: Map<number, Book>;
    readers: Map<number, Reader>;
    librarians: Librarian[];
    searchBooks(query: string): Book[];
    registerReader(reader: Omit<Reader, 'id'>): number;
    borrowBook(readerId: number, bookId: number): boolean;
}
                `
            };

            result.innerHTML = interfaces[type] || 'æ¥å£æœªæ‰¾åˆ°';
        }

        function createBookInstance() {
            const result = document.getElementById('interfaceResult');
            result.innerHTML = `
<div class="loading-spinner"></div>æ­£åœ¨åˆ›å»ºå›¾ä¹¦å®ä¾‹...
            `;

            setTimeout(() => {
                result.innerHTML = `
âœ… å›¾ä¹¦å®ä¾‹åˆ›å»ºæˆåŠŸï¼š

const book: Book = {
    id: 1,
    title: "è®ºè¯­",
    author: "å­”å­",
    category: BookCategory.Classic,
    status: BookStatus.Available,
    publishYear: -500,
    isbn: "978-7-01-000001-0"
};
                `;
            }, 1000);
        }

        function validateInterface() {
            const result = document.getElementById('interfaceResult');
            result.innerHTML = `
âœ… æ¥å£éªŒè¯é€šè¿‡ï¼š
â€¢ æ‰€æœ‰å¿…éœ€å±æ€§å·²å®šä¹‰
â€¢ ç±»å‹åŒ¹é…æ­£ç¡®
â€¢ æ–¹æ³•ç­¾åæœ‰æ•ˆ
â€¢ ç»§æ‰¿å…³ç³»æ­£ç¡®
            `;
        }

        function showInterfaceError() {
            const result = document.getElementById('interfaceResult');
            result.innerHTML = `
<div class="type-error">âŒ æ¥å£é”™è¯¯ç¤ºä¾‹ï¼š</div>
<div class="type-error">Property 'title' is missing in type</div>
<div class="type-error">Type 'string' is not assignable to type 'BookStatus'</div>
<div class="type-error">Cannot assign to 'id' because it is a read-only property</div>
            `;
        }

        function handleGenericEnter(event) {
            if (event.key === 'Enter') {
                checkGenericType();
            }
        }

        function checkGenericType() {
            const input = document.getElementById('genericInput');
            const output = document.getElementById('genericOutput');
            const expression = input.value.trim();

            if (!expression) return;

            output.innerHTML = `<div class="loading-spinner"></div>æ­£åœ¨åˆ†ææ³›å‹ç±»å‹...`;

            setTimeout(() => {
                const responses = {
                    'Array<Book>': 'âœ… æœ‰æ•ˆçš„æ³›å‹æ•°ç»„ç±»å‹ï¼šBook[]',
                    'Promise<Book>': 'âœ… æœ‰æ•ˆçš„Promiseæ³›å‹ï¼šå¼‚æ­¥è¿”å›Book',
                    'Map<number, Book>': 'âœ… æœ‰æ•ˆçš„Mapæ³›å‹ï¼šæ•°å­—é”®ï¼ŒBookå€¼',
                    'Repository<Book>': 'âœ… æœ‰æ•ˆçš„è‡ªå®šä¹‰æ³›å‹ï¼šBookä»“åº“',
                    'T extends Book': 'âœ… æœ‰æ•ˆçš„æ³›å‹çº¦æŸï¼šTå¿…é¡»ç»§æ‰¿Book'
                };

                output.innerHTML = responses[expression] || `âš ï¸ æœªè¯†åˆ«çš„æ³›å‹è¡¨è¾¾å¼ï¼š${expression}`;
            }, 800);
        }

        function testGenericArray() {
            const result = document.getElementById('genericResult');
            result.innerHTML = `
æ³›å‹æ•°ç»„æµ‹è¯•ï¼š
â€¢ Array<Book> âœ…
â€¢ Array<Reader> âœ…
â€¢ Array<string> âœ…
â€¢ ç±»å‹å®‰å…¨ä¿è¯ âœ…
            `;
        }

        function testGenericFunction() {
            const result = document.getElementById('genericResult');
            result.innerHTML = `
æ³›å‹å‡½æ•°æµ‹è¯•ï¼š
function findById<T>(items: T[], id: number): T | undefined

â€¢ findById<Book>(books, 1) âœ…
â€¢ findById<Reader>(readers, 100) âœ…
â€¢ ç±»å‹æ¨æ–­æ­£ç¡® âœ…
            `;
        }

        function testGenericClass() {
            const result = document.getElementById('genericResult');
            result.innerHTML = `
æ³›å‹ç±»æµ‹è¯•ï¼š
class Repository<T extends { id: number }>

â€¢ new Repository<Book>() âœ…
â€¢ new Repository<Reader>() âœ…
â€¢ çº¦æŸæ£€æŸ¥é€šè¿‡ âœ…
            `;
        }

        function testGenericConstraints() {
            const result = document.getElementById('genericResult');
            result.innerHTML = `
æ³›å‹çº¦æŸæµ‹è¯•ï¼š
â€¢ T extends Book âœ…
â€¢ T extends { id: number } âœ…
â€¢ keyof T âœ…
â€¢ T[K] âœ…
            `;
        }

        function showEnumValue(status) {
            const result = document.getElementById('enumResult');
            const statusInfo = {
                available: { value: 'BookStatus.Available', desc: 'å›¾ä¹¦å¯ä¾›å€Ÿé˜…' },
                borrowed: { value: 'BookStatus.Borrowed', desc: 'å›¾ä¹¦å·²è¢«å€Ÿå‡º' },
                reserved: { value: 'BookStatus.Reserved', desc: 'å›¾ä¹¦å·²è¢«é¢„çº¦' },
                maintenance: { value: 'BookStatus.Maintenance', desc: 'å›¾ä¹¦æ­£åœ¨ç»´æŠ¤' }
            };

            const info = statusInfo[status];
            result.innerHTML = `
æšä¸¾å€¼ï¼š${info.value}
æè¿°ï¼š${info.desc}
æ•°å­—å€¼ï¼š${Object.keys(statusInfo).indexOf(status)}
            `;
        }

        function testStringEnum() {
            const result = document.getElementById('enumResult');
            result.innerHTML = `
å­—ç¬¦ä¸²æšä¸¾æµ‹è¯•ï¼š
enum BookCategory {
    Classic = "classic",
    History = "history",
    Philosophy = "philosophy"
}

âœ… ç±»å‹å®‰å…¨
âœ… å¯è¯»æ€§å¼º
âœ… æ— åå‘æ˜ å°„
            `;
        }

        function testNumericEnum() {
            const result = document.getElementById('enumResult');
            result.innerHTML = `
æ•°å­—æšä¸¾æµ‹è¯•ï¼š
enum BookStatus {
    Available,    // 0
    Borrowed,     // 1
    Reserved      // 2
}

âœ… è‡ªåŠ¨é€’å¢
âœ… åå‘æ˜ å°„
âœ… æ€§èƒ½ä¼˜åŒ–
            `;
        }

        function testConstEnum() {
            const result = document.getElementById('enumResult');
            result.innerHTML = `
å¸¸é‡æšä¸¾æµ‹è¯•ï¼š
const enum Permission {
    Read = "read",
    Write = "write"
}

âœ… ç¼–è¯‘æ—¶å†…è”
âœ… é›¶è¿è¡Œæ—¶å¼€é”€
âœ… æ›´å¥½çš„æ€§èƒ½
            `;
        }

        function createLibraryClass() {
            const result = document.getElementById('classResult');
            result.innerHTML = `
<div class="loading-spinner"></div>æ­£åœ¨åˆ›å»ºå›¾ä¹¦é¦†ç±»...
            `;

            setTimeout(() => {
                result.innerHTML = `
âœ… å›¾ä¹¦é¦†ç±»åˆ›å»ºæˆåŠŸï¼š

class Library {
    private books: Map<number, Book> = new Map();
    private readers: Map<number, Reader> = new Map();
    
    addBook(book: Book): void { ... }
    findBook(id: number): Book | undefined { ... }
    searchBooks(query: string): Book[] { ... }
}

const library = new Library();
                `;
            }, 1000);
        }

        function testInheritance() {
            const result = document.getElementById('classResult');
            result.innerHTML = `
ç»§æ‰¿æµ‹è¯•ï¼š

abstract class LibraryItem { ... }
class Book extends LibraryItem { ... }
class Reader extends Person { ... }
class Librarian extends Reader { ... }

âœ… ç»§æ‰¿é“¾æ­£ç¡®
âœ… æ–¹æ³•é‡å†™æœ‰æ•ˆ
âœ… superè°ƒç”¨æˆåŠŸ
            `;
        }

        function testAbstractClass() {
            const result = document.getElementById('classResult');
            result.innerHTML = `
æŠ½è±¡ç±»æµ‹è¯•ï¼š

abstract class LibraryItem {
    abstract getInfo(): string;  // å¿…é¡»å®ç°
    getId(): number { ... }      // å¯ç›´æ¥ä½¿ç”¨
}

âœ… æŠ½è±¡æ–¹æ³•å¼ºåˆ¶å®ç°
âœ… å…·ä½“æ–¹æ³•å¯ç»§æ‰¿
âœ… æ— æ³•ç›´æ¥å®ä¾‹åŒ–
            `;
        }

        function testAccessModifiers() {
            const result = document.getElementById('classResult');
            result.innerHTML = `
è®¿é—®ä¿®é¥°ç¬¦æµ‹è¯•ï¼š

class Book {
    public title: string;        // å…¬å¼€
    private author: string;      // ç§æœ‰
    protected id: number;        // å—ä¿æŠ¤
    readonly isbn: string;       // åªè¯»
}

âœ… å°è£…æ€§ä¿è¯
âœ… è®¿é—®æ§åˆ¶æœ‰æ•ˆ
âœ… åªè¯»å±æ€§ä¿æŠ¤
            `;
        }

        // é¡µé¢åŠ è½½æ—¶çš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function () {
            console.log('TypeScriptç±»å‹ç³»ç»Ÿé¡µé¢å·²åŠ è½½');

            // æ¨¡æ‹Ÿä¸€äº›åˆå§‹æ•°æ®
            const sampleBooks = [
                { id: 1, title: "è®ºè¯­", author: "å­”å­", category: "classic" },
                { id: 2, title: "å²è®°", author: "å¸é©¬è¿", category: "history" },
                { id: 3, title: "é“å¾·ç»", author: "è€å­", category: "philosophy" }
            ];

            console.log('ç¤ºä¾‹å›¾ä¹¦æ•°æ®:', sampleBooks);
        });
    </script>
</body>

</html>