<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç¬¬å…«å‘¨ - Node.jsæœåŠ¡ç«¯å¼€å‘å…¥é—¨</title>
    <style>
      body {
        font-family: "Microsoft YaHei", Arial, sans-serif;
        line-height: 1.6;
        margin: 0;
        padding: 20px;
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        min-height: 100vh;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }
      h1 {
        color: #2c3e50;
        text-align: center;
        border-bottom: 3px solid #27ae60;
        padding-bottom: 15px;
        margin-bottom: 30px;
        font-size: 2.5em;
        background: linear-gradient(135deg, #27ae60, #2ecc71);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }
      h2 {
        color: #27ae60;
        margin-top: 40px;
        padding-left: 15px;
        border-left: 5px solid #27ae60;
        background: linear-gradient(90deg, #e8f5e8 0%, transparent 100%);
        padding: 15px;
        border-radius: 5px;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .section-icon {
        font-size: 1.5em;
      }
      .highlight {
        background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        color: white;
        padding: 25px;
        border-radius: 15px;
        margin: 25px 0;
        box-shadow: 0 8px 25px rgba(39, 174, 96, 0.3);
      }
      .concept-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        margin: 20px 0;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        border-left: 5px solid #27ae60;
        transition: all 0.3s ease;
      }
      .concept-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 35px rgba(0, 0, 0, 0.15);
      }
      .code-block {
        background: #2c3e50;
        color: #ecf0f1;
        padding: 25px;
        border-radius: 15px;
        font-family: "Courier New", monospace;
        margin: 20px 0;
        overflow-x: auto;
        position: relative;
        box-shadow: 0 8px 25px rgba(44, 62, 80, 0.3);
      }
      .code-block::before {
        content: "Node.js";
        position: absolute;
        top: 10px;
        right: 15px;
        background: #27ae60;
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 0.8em;
        font-weight: bold;
      }
      .demo-area {
        border: 3px solid #27ae60;
        padding: 25px;
        margin: 20px 0;
        border-radius: 15px;
        background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
        box-shadow: 0 5px 15px rgba(39, 174, 96, 0.2);
      }
      .server-demo {
        background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        border: 2px solid #4caf50;
      }
      .npm-demo {
        background: linear-gradient(135deg, #fff3e0 0%, #ffcc02 100%);
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        border: 2px solid #ff9800;
      }
      .express-demo {
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        border: 2px solid #2196f3;
      }
      button {
        background: linear-gradient(135deg, #27ae60, #2ecc71);
        color: white;
        border: none;
        padding: 12px 20px;
        border-radius: 25px;
        cursor: pointer;
        margin: 8px;
        font-size: 14px;
        font-weight: bold;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
      }
      button:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
        background: linear-gradient(135deg, #2ecc71, #27ae60);
      }
      button:disabled {
        background: #bdc3c7;
        cursor: not-allowed;
        transform: none;
        box-shadow: none;
      }
      .output {
        background: #2c3e50;
        color: #ecf0f1;
        border: none;
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        min-height: 60px;
        font-family: "Courier New", monospace;
        font-size: 14px;
        line-height: 1.5;
        box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
        white-space: pre-wrap;
        max-height: 300px;
        overflow-y: auto;
      }
      .syntax-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
      }
      .syntax-item {
        background: white;
        padding: 20px;
        border-radius: 10px;
        border-left: 5px solid #27ae60;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      .syntax-item h4 {
        color: #2c3e50;
        margin-top: 0;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .feature-highlight {
        background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
        color: white;
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
        text-align: center;
        font-weight: bold;
      }
      .knowledge-point {
        background: #f8f9fa;
        border-left: 4px solid #27ae60;
        padding: 15px;
        margin: 15px 0;
        border-radius: 0 10px 10px 0;
      }
      .knowledge-point strong {
        color: #27ae60;
      }
      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }
      .comparison-table th {
        background: linear-gradient(135deg, #27ae60, #2ecc71);
        color: white;
        padding: 15px;
        text-align: left;
      }
      .comparison-table td {
        padding: 12px 15px;
        border-bottom: 1px solid #ecf0f1;
      }
      .comparison-table tr:nth-child(even) {
        background: #f8f9fa;
      }
      .terminal-output {
        background: #1e1e1e;
        color: #00ff00;
        padding: 15px;
        border-radius: 8px;
        font-family: "Courier New", monospace;
        margin: 10px 0;
        border: 1px solid #333;
        font-size: 12px;
        overflow-x: auto;
      }
      .file-structure {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        padding: 15px;
        margin: 15px 0;
        font-family: "Courier New", monospace;
        font-size: 14px;
      }
      .file-structure .folder {
        color: #f39c12;
        font-weight: bold;
      }
      .file-structure .file {
        color: #2c3e50;
      }
      .status-badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 12px;
        font-weight: bold;
        margin: 0 5px;
      }
      .status-success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .status-warning {
        background: #fff3cd;
        color: #856404;
        border: 1px solid #ffeaa7;
      }
      .status-error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      .architecture-diagram {
        background: white;
        border: 2px solid #27ae60;
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
        text-align: center;
      }
      .layer {
        background: linear-gradient(135deg, #e8f5e8, #c8e6c9);
        border: 1px solid #27ae60;
        border-radius: 8px;
        padding: 15px;
        margin: 10px 0;
        font-weight: bold;
        color: #2c3e50;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ç¬¬å…«å‘¨ - Node.jsæœåŠ¡ç«¯å¼€å‘å…¥é—¨</h1>

      <div class="highlight">
        <strong>ğŸ¯ å­¦ä¹ ç›®æ ‡ï¼š</strong>ç†è§£Node.jsè¿è¡Œç¯å¢ƒï¼ŒæŒæ¡æœåŠ¡ç«¯JavaScriptå¼€å‘åŸºç¡€ï¼Œå­¦ä¼šä½¿ç”¨npmåŒ…ç®¡ç†å™¨ï¼Œäº†è§£Expressæ¡†æ¶ï¼Œä¸ºå…¨æ ˆå¼€å‘å¥ å®šåŸºç¡€
      </div>

      <div class="concept-card">
        <h3>ğŸŒŸ Node.jsç®€ä»‹</h3>
        <p>Node.jsæ˜¯ä¸€ä¸ªåŸºäºChrome V8å¼•æ“çš„JavaScriptè¿è¡Œæ—¶ç¯å¢ƒï¼Œè®©JavaScriptèƒ½å¤Ÿåœ¨æœåŠ¡å™¨ç«¯è¿è¡Œï¼Œå®ç°å…¨æ ˆJavaScriptå¼€å‘ã€‚</p>
        
        <div class="architecture-diagram">
          <h4>Node.jsæ¶æ„å›¾</h4>
          <div class="layer">ğŸŒ åº”ç”¨å±‚ (Your Application)</div>
          <div class="layer">ğŸ“š Node.js API (fs, http, path, etc.)</div>
          <div class="layer">ğŸ”§ Node.js Bindings (C++)</div>
          <div class="layer">âš¡ V8 JavaScript Engine + libuv</div>
          <div class="layer">ğŸ’» æ“ä½œç³»ç»Ÿ (Windows, macOS, Linux)</div>
        </div>
        
        <table class="comparison-table">
          <thead>
            <tr>
              <th>ç‰¹æ€§</th>
              <th>ä¼ ç»ŸæœåŠ¡ç«¯</th>
              <th>Node.js</th>
              <th>ä¼˜åŠ¿</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>è¯­è¨€</strong></td>
              <td>Java, PHP, Pythonç­‰</td>
              <td>JavaScript</td>
              <td>å‰åç«¯ç»Ÿä¸€è¯­è¨€</td>
            </tr>
            <tr>
              <td><strong>å¹¶å‘æ¨¡å‹</strong></td>
              <td>å¤šçº¿ç¨‹</td>
              <td>å•çº¿ç¨‹äº‹ä»¶å¾ªç¯</td>
              <td>é«˜å¹¶å‘ï¼Œä½å†…å­˜å ç”¨</td>
            </tr>
            <tr>
              <td><strong>I/Oæ“ä½œ</strong></td>
              <td>é˜»å¡å¼</td>
              <td>éé˜»å¡å¼</td>
              <td>é«˜æ€§èƒ½I/Oå¤„ç†</td>
            </tr>
            <tr>
              <td><strong>ç”Ÿæ€ç³»ç»Ÿ</strong></td>
              <td>å„æœ‰ç‰¹è‰²</td>
              <td>npmåŒ…ç®¡ç†å™¨</td>
              <td>ä¸°å¯Œçš„ç¬¬ä¸‰æ–¹æ¨¡å—</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h2><span class="section-icon">ğŸš€</span>Node.jsæ ¸å¿ƒæ¨¡å—</h2>
      <p>Node.jsæä¾›äº†ä¸°å¯Œçš„å†…ç½®æ¨¡å—ï¼Œæ— éœ€å®‰è£…å³å¯ä½¿ç”¨ï¼Œæ˜¯æœåŠ¡ç«¯å¼€å‘çš„åŸºç¡€ã€‚</p>

      <div class="knowledge-point">
        <strong>å¸¸ç”¨æ ¸å¿ƒæ¨¡å—ï¼š</strong>
        <ul>
          <li><strong>httpï¼š</strong>åˆ›å»ºHTTPæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯</li>
          <li><strong>fsï¼š</strong>æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</li>
          <li><strong>pathï¼š</strong>è·¯å¾„å¤„ç†å·¥å…·</li>
          <li><strong>urlï¼š</strong>URLè§£æå·¥å…·</li>
          <li><strong>querystringï¼š</strong>æŸ¥è¯¢å­—ç¬¦ä¸²å¤„ç†</li>
          <li><strong>cryptoï¼š</strong>åŠ å¯†åŠŸèƒ½</li>
          <li><strong>osï¼š</strong>æ“ä½œç³»ç»Ÿç›¸å…³å·¥å…·</li>
        </ul>
      </div>

      <div class="code-block">
// HTTPæœåŠ¡å™¨ç¤ºä¾‹
const http = require('http');
const url = require('url');
const querystring = require('querystring');

// åˆ›å»ºHTTPæœåŠ¡å™¨
const server = http.createServer((req, res) => {
  // è§£æURL
  const parsedUrl = url.parse(req.url, true);
  const pathname = parsedUrl.pathname;
  const query = parsedUrl.query;
  
  // è®¾ç½®å“åº”å¤´
  res.writeHead(200, {
    'Content-Type': 'application/json; charset=utf-8',
    'Access-Control-Allow-Origin': '*'
  });
  
  // è·¯ç”±å¤„ç†
  if (pathname === '/') {
    res.end(JSON.stringify({
      message: 'æ¬¢è¿ä½¿ç”¨Node.jsæœåŠ¡å™¨ï¼',
      timestamp: new Date().toISOString(),
      method: req.method
    }));
  } else if (pathname === '/api/user') {
    res.end(JSON.stringify({
      id: 1,
      name: 'å¼ ä¸‰',
      email: 'zhangsan@example.com',
      query: query
    }));
  } else if (pathname === '/api/time') {
    res.end(JSON.stringify({
      currentTime: new Date().toLocaleString('zh-CN'),
      timestamp: Date.now()
    }));
  } else {
    res.writeHead(404);
    res.end(JSON.stringify({
      error: 'é¡µé¢æœªæ‰¾åˆ°',
      path: pathname
    }));
  }
});

// å¯åŠ¨æœåŠ¡å™¨
const PORT = 3000;
server.listen(PORT, () => {
  console.log(`æœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:${PORT}`);
});

// æ–‡ä»¶ç³»ç»Ÿæ“ä½œç¤ºä¾‹
const fs = require('fs');
const path = require('path');

// å¼‚æ­¥è¯»å–æ–‡ä»¶
fs.readFile('package.json', 'utf8', (err, data) => {
  if (err) {
    console.error('è¯»å–æ–‡ä»¶å¤±è´¥:', err);
    return;
  }
  console.log('æ–‡ä»¶å†…å®¹:', JSON.parse(data));
});

// åŒæ­¥è¯»å–æ–‡ä»¶
try {
  const data = fs.readFileSync('package.json', 'utf8');
  console.log('åŒæ­¥è¯»å–æˆåŠŸ');
} catch (err) {
  console.error('åŒæ­¥è¯»å–å¤±è´¥:', err);
}

// å†™å…¥æ–‡ä»¶
const logData = {
  timestamp: new Date().toISOString(),
  message: 'Node.jså­¦ä¹ æ—¥å¿—',
  level: 'info'
};

fs.writeFile('log.json', JSON.stringify(logData, null, 2), (err) => {
  if (err) {
    console.error('å†™å…¥å¤±è´¥:', err);
  } else {
    console.log('æ—¥å¿—å†™å…¥æˆåŠŸ');
  }
});
      </div>

      <div class="demo-area">
        <h3>ğŸš€ Node.jsæ ¸å¿ƒæ¨¡å—æ¼”ç¤º</h3>
        <div class="server-demo">
          <div class="feature-highlight">HTTPæœåŠ¡å™¨æ¨¡æ‹Ÿ</div>
          <button onclick="simulateHttpServer()">ğŸŒ å¯åŠ¨HTTPæœåŠ¡å™¨</button>
          <button onclick="simulateFileOperation()">ğŸ“ æ–‡ä»¶ç³»ç»Ÿæ“ä½œ</button>
          <button onclick="simulatePathOperation()">ğŸ›¤ï¸ è·¯å¾„å¤„ç†</button>
          <button onclick="simulateUrlParsing()">ğŸ”— URLè§£æ</button>
          <div class="output" id="nodeOutput">ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹Node.jsæ ¸å¿ƒæ¨¡å—æ¼”ç¤º...</div>
        </div>
      </div>

      <h2><span class="section-icon">ğŸ“¦</span>NPMåŒ…ç®¡ç†å™¨</h2>
      <p>NPM (Node Package Manager) æ˜¯Node.jsçš„åŒ…ç®¡ç†å™¨ï¼Œæ‹¥æœ‰ä¸–ç•Œä¸Šæœ€å¤§çš„å¼€æºåº“ç”Ÿæ€ç³»ç»Ÿã€‚</p>

      <div class="knowledge-point">
        <strong>NPMæ ¸å¿ƒæ¦‚å¿µï¼š</strong>
        <ul>
          <li><strong>package.jsonï¼š</strong>é¡¹ç›®é…ç½®æ–‡ä»¶ï¼Œè®°å½•ä¾èµ–å’Œè„šæœ¬</li>
          <li><strong>node_modulesï¼š</strong>ä¾èµ–åŒ…å­˜å‚¨ç›®å½•</li>
          <li><strong>package-lock.jsonï¼š</strong>é”å®šä¾èµ–ç‰ˆæœ¬</li>
          <li><strong>è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼š</strong>ä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆæœ¬ (å¦‚ 1.2.3)</li>
        </ul>
      </div>

      <div class="code-block">
// package.json ç¤ºä¾‹
{
  "name": "my-node-project",
  "version": "1.0.0",
  "description": "æˆ‘çš„Node.jsé¡¹ç›®",
  "main": "index.js",
  "scripts": {
    "start": "node index.js",
    "dev": "nodemon index.js",
    "test": "jest",
    "build": "webpack --mode production"
  },
  "dependencies": {
    "express": "^4.18.0",
    "lodash": "^4.17.21",
    "moment": "^2.29.0"
  },
  "devDependencies": {
    "nodemon": "^2.0.15",
    "jest": "^27.5.0",
    "webpack": "^5.70.0"
  },
  "keywords": ["node", "javascript", "web"],
  "author": "Your Name",
  "license": "MIT"
}

// å¸¸ç”¨NPMå‘½ä»¤
// åˆå§‹åŒ–é¡¹ç›®
// npm init -y

// å®‰è£…ä¾èµ–
// npm install express
// npm install --save-dev nodemon
// npm install -g pm2

// è¿è¡Œè„šæœ¬
// npm start
// npm run dev
// npm test

// æ›´æ–°ä¾èµ–
// npm update
// npm outdated

// å¸è½½ä¾èµ–
// npm uninstall express

// æŸ¥çœ‹ä¾èµ–
// npm list
// npm list --depth=0
      </div>

      <div class="demo-area">
        <h3>ğŸ“¦ NPMåŒ…ç®¡ç†æ¼”ç¤º</h3>
        <div class="npm-demo">
          <div class="feature-highlight">NPMæ“ä½œæ¨¡æ‹Ÿ</div>
          <button onclick="simulateNpmInit()">ğŸ¯ npm init</button>
          <button onclick="simulateNpmInstall()">ğŸ“¥ npm install</button>
          <button onclick="simulateNpmScripts()">âš¡ npm scripts</button>
          <button onclick="simulatePackageInfo()">ğŸ“‹ åŒ…ä¿¡æ¯æŸ¥çœ‹</button>
          <div class="output" id="npmOutput">ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹NPMæ“ä½œæ¼”ç¤º...</div>
          <div class="file-structure" id="projectStructure" style="display: none;"></div>
        </div>
      </div>

      <h2><span class="section-icon">ğŸŒ</span>Expressæ¡†æ¶å…¥é—¨</h2>
      <p>Expressæ˜¯Node.jsæœ€æµè¡Œçš„Webåº”ç”¨æ¡†æ¶ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½æ¥æ„å»ºWebåº”ç”¨å’ŒAPIã€‚</p>

      <div class="knowledge-point">
        <strong>Expressæ ¸å¿ƒç‰¹æ€§ï¼š</strong>
        <ul>
          <li><strong>è·¯ç”±ç³»ç»Ÿï¼š</strong>å¤„ç†ä¸åŒURLçš„è¯·æ±‚</li>
          <li><strong>ä¸­é—´ä»¶ï¼š</strong>å¤„ç†è¯·æ±‚å’Œå“åº”çš„å‡½æ•°é“¾</li>
          <li><strong>æ¨¡æ¿å¼•æ“ï¼š</strong>åŠ¨æ€ç”ŸæˆHTML</li>
          <li><strong>é™æ€æ–‡ä»¶æœåŠ¡ï¼š</strong>æä¾›CSSã€JSã€å›¾ç‰‡ç­‰é™æ€èµ„æº</li>
          <li><strong>é”™è¯¯å¤„ç†ï¼š</strong>ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶</li>
        </ul>
      </div>

      <div class="code-block">
// ExpressåŸºç¡€åº”ç”¨
const express = require('express');
const path = require('path');
const app = express();
const PORT = 3000;

// ä¸­é—´ä»¶é…ç½®
app.use(express.json()); // è§£æJSONè¯·æ±‚ä½“
app.use(express.urlencoded({ extended: true })); // è§£æURLç¼–ç è¯·æ±‚ä½“
app.use(express.static('public')); // é™æ€æ–‡ä»¶æœåŠ¡

// æ—¥å¿—ä¸­é—´ä»¶
app.use((req, res, next) => {
  console.log(`${new Date().toISOString()} - ${req.method} ${req.url}`);
  next();
});

// è·¯ç”±å®šä¹‰
app.get('/', (req, res) => {
  res.json({
    message: 'æ¬¢è¿ä½¿ç”¨ExpressæœåŠ¡å™¨ï¼',
    timestamp: new Date().toISOString(),
    version: '1.0.0'
  });
});

// APIè·¯ç”±
app.get('/api/users', (req, res) => {
  const users = [
    { id: 1, name: 'å¼ ä¸‰', email: 'zhangsan@example.com' },
    { id: 2, name: 'æå››', email: 'lisi@example.com' },
    { id: 3, name: 'ç‹äº”', email: 'wangwu@example.com' }
  ];
  res.json(users);
});

// å¸¦å‚æ•°çš„è·¯ç”±
app.get('/api/users/:id', (req, res) => {
  const userId = parseInt(req.params.id);
  const user = {
    id: userId,
    name: `ç”¨æˆ·${userId}`,
    email: `user${userId}@example.com`,
    createdAt: new Date().toISOString()
  };
  res.json(user);
});

// POSTè·¯ç”±
app.post('/api/users', (req, res) => {
  const { name, email } = req.body;
  const newUser = {
    id: Date.now(),
    name,
    email,
    createdAt: new Date().toISOString()
  };
  res.status(201).json({
    message: 'ç”¨æˆ·åˆ›å»ºæˆåŠŸ',
    user: newUser
  });
});

// æŸ¥è¯¢å‚æ•°å¤„ç†
app.get('/api/search', (req, res) => {
  const { q, page = 1, limit = 10 } = req.query;
  res.json({
    query: q,
    page: parseInt(page),
    limit: parseInt(limit),
    results: [`ç»“æœ1 for "${q}"`, `ç»“æœ2 for "${q}"`]
  });
});

// é”™è¯¯å¤„ç†ä¸­é—´ä»¶
app.use((err, req, res, next) => {
  console.error(err.stack);
  res.status(500).json({
    error: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯',
    message: err.message
  });
});

// 404å¤„ç†
app.use((req, res) => {
  res.status(404).json({
    error: 'é¡µé¢æœªæ‰¾åˆ°',
    path: req.url
  });
});

// å¯åŠ¨æœåŠ¡å™¨
app.listen(PORT, () => {
  console.log(`ExpressæœåŠ¡å™¨è¿è¡Œåœ¨ http://localhost:${PORT}`);
});

// è·¯ç”±æ¨¡å—åŒ–ç¤ºä¾‹
// routes/users.js
const express = require('express');
const router = express.Router();

router.get('/', (req, res) => {
  res.json({ message: 'ç”¨æˆ·åˆ—è¡¨' });
});

router.get('/:id', (req, res) => {
  res.json({ message: `ç”¨æˆ·è¯¦æƒ…: ${req.params.id}` });
});

module.exports = router;

// åœ¨ä¸»åº”ç”¨ä¸­ä½¿ç”¨
// const userRoutes = require('./routes/users');
// app.use('/api/users', userRoutes);
      </div>

      <div class="demo-area">
        <h3>ğŸŒ Expressæ¡†æ¶æ¼”ç¤º</h3>
        <div class="express-demo">
          <div class="feature-highlight">Expressåº”ç”¨æ¨¡æ‹Ÿ</div>
          <button onclick="simulateExpressApp()">ğŸš€ åˆ›å»ºExpressåº”ç”¨</button>
          <button onclick="simulateExpressRoutes()">ğŸ›¤ï¸ è·¯ç”±å¤„ç†</button>
          <button onclick="simulateExpressMiddleware()">ğŸ”§ ä¸­é—´ä»¶æ¼”ç¤º</button>
          <button onclick="simulateExpressAPI()">ğŸ“¡ APIæ¥å£æµ‹è¯•</button>
          <div class="output" id="expressOutput">ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹Expressæ¡†æ¶æ¼”ç¤º...</div>
        </div>
      </div>

      <div class="concept-card">
        <h3>ğŸ› ï¸ Node.jså¼€å‘å·¥å…·é“¾</h3>
        <div class="syntax-grid">
          <div class="syntax-item">
            <h4>ğŸ”§ å¼€å‘å·¥å…·</h4>
            <ul>
              <li><strong>nodemonï¼š</strong>è‡ªåŠ¨é‡å¯å¼€å‘æœåŠ¡å™¨</li>
              <li><strong>pm2ï¼š</strong>ç”Ÿäº§ç¯å¢ƒè¿›ç¨‹ç®¡ç†</li>
              <li><strong>nvmï¼š</strong>Node.jsç‰ˆæœ¬ç®¡ç†</li>
              <li><strong>npm-check-updatesï¼š</strong>ä¾èµ–æ›´æ–°æ£€æŸ¥</li>
            </ul>
          </div>
          <div class="syntax-item">
            <h4>ğŸ§ª æµ‹è¯•å·¥å…·</h4>
            <ul>
              <li><strong>Jestï¼š</strong>JavaScriptæµ‹è¯•æ¡†æ¶</li>
              <li><strong>Mochaï¼š</strong>æµ‹è¯•æ¡†æ¶</li>
              <li><strong>Supertestï¼š</strong>HTTPæ¥å£æµ‹è¯•</li>
              <li><strong>Postmanï¼š</strong>APIæµ‹è¯•å·¥å…·</li>
            </ul>
          </div>
          <div class="syntax-item">
            <h4>ğŸ“Š ç›‘æ§è°ƒè¯•</h4>
            <ul>
              <li><strong>Node Inspectorï¼š</strong>è°ƒè¯•å·¥å…·</li>
              <li><strong>Winstonï¼š</strong>æ—¥å¿—ç®¡ç†</li>
              <li><strong>Morganï¼š</strong>HTTPè¯·æ±‚æ—¥å¿—</li>
              <li><strong>New Relicï¼š</strong>æ€§èƒ½ç›‘æ§</li>
            </ul>
          </div>
          <div class="syntax-item">
            <h4>ğŸ”’ å®‰å…¨å·¥å…·</h4>
            <ul>
              <li><strong>Helmetï¼š</strong>å®‰å…¨å¤´è®¾ç½®</li>
              <li><strong>bcryptï¼š</strong>å¯†ç åŠ å¯†</li>
              <li><strong>jsonwebtokenï¼š</strong>JWTè®¤è¯</li>
              <li><strong>rate-limiterï¼š</strong>è¯·æ±‚é™æµ</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="concept-card">
        <h3>ğŸ“ Node.jså­¦ä¹ è·¯å¾„</h3>
        <div class="syntax-grid">
          <div class="syntax-item">
            <h4>ğŸ“š åŸºç¡€é˜¶æ®µ</h4>
            <ul>
              <li>Node.jsè¿è¡Œç¯å¢ƒ</li>
              <li>æ ¸å¿ƒæ¨¡å—ä½¿ç”¨</li>
              <li>NPMåŒ…ç®¡ç†</li>
              <li>å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼</li>
            </ul>
          </div>
          <div class="syntax-item">
            <h4>ğŸŒ Webå¼€å‘</h4>
            <ul>
              <li>Expressæ¡†æ¶</li>
              <li>RESTful APIè®¾è®¡</li>
              <li>ä¸­é—´ä»¶å¼€å‘</li>
              <li>æ¨¡æ¿å¼•æ“ä½¿ç”¨</li>
            </ul>
          </div>
          <div class="syntax-item">
            <h4>ğŸ—„ï¸ æ•°æ®åº“é›†æˆ</h4>
            <ul>
              <li>MongoDB + Mongoose</li>
              <li>MySQL + Sequelize</li>
              <li>Redisç¼“å­˜</li>
              <li>æ•°æ®åº“è®¾è®¡</li>
            </ul>
          </div>
          <div class="syntax-item">
            <h4>ğŸš€ é«˜çº§ç‰¹æ€§</h4>
            <ul>
              <li>å¾®æœåŠ¡æ¶æ„</li>
              <li>WebSocketå®æ—¶é€šä¿¡</li>
              <li>GraphQL API</li>
              <li>Dockerå®¹å™¨åŒ–</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="highlight">
        <strong>ğŸ‰ å­¦ä¹ æ€»ç»“ï¼š</strong>æœ¬å‘¨å­¦ä¹ äº†Node.jsæœåŠ¡ç«¯å¼€å‘åŸºç¡€ï¼ŒæŒæ¡äº†æ ¸å¿ƒæ¨¡å—ä½¿ç”¨ã€NPMåŒ…ç®¡ç†å’ŒExpressæ¡†æ¶ã€‚è¿™äº›æŠ€èƒ½è®©æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨JavaScriptè¿›è¡Œå…¨æ ˆå¼€å‘ï¼Œä¸ºæ„å»ºç°ä»£Webåº”ç”¨å¥ å®šäº†åŸºç¡€ã€‚ä¸‹å‘¨æˆ‘ä»¬å°†å­¦ä¹ TypeScriptï¼Œè¿›ä¸€æ­¥æå‡ä»£ç è´¨é‡å’Œå¼€å‘æ•ˆç‡ã€‚
      </div>
    </div>

    <script>
      // Node.jsæ ¸å¿ƒæ¨¡å—æ¼”ç¤ºå‡½æ•°
      function simulateHttpServer() {
        const output = document.getElementById('nodeOutput');
        output.textContent = 'ğŸŒ æ¨¡æ‹ŸHTTPæœåŠ¡å™¨å¯åŠ¨...\n';
        
        // æ¨¡æ‹ŸæœåŠ¡å™¨å¯åŠ¨è¿‡ç¨‹
        setTimeout(() => {
          output.textContent += 'âœ… HTTPæœåŠ¡å™¨å·²å¯åŠ¨\n';
          output.textContent += 'ğŸ“ ç›‘å¬åœ°å€: http://localhost:3000\n';
          output.textContent += 'ğŸ”„ ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...\n\n';
          
          // æ¨¡æ‹Ÿè¯·æ±‚å¤„ç†
          const requests = [
            { method: 'GET', path: '/', response: 'é¦–é¡µæ•°æ®' },
            { method: 'GET', path: '/api/user', response: 'ç”¨æˆ·ä¿¡æ¯' },
            { method: 'POST', path: '/api/data', response: 'æ•°æ®å·²ä¿å­˜' },
            { method: 'GET', path: '/api/time', response: new Date().toLocaleString() }
          ];
          
          requests.forEach((req, index) => {
            setTimeout(() => {
              output.textContent += `ğŸ“¨ ${req.method} ${req.path} -> ${req.response}\n`;
            }, (index + 1) * 800);
          });
        }, 1000);
      }

      function simulateFileOperation() {
        const output = document.getElementById('nodeOutput');
        output.textContent = 'ğŸ“ æ¨¡æ‹Ÿæ–‡ä»¶ç³»ç»Ÿæ“ä½œ...\n';
        
        const operations = [
          'ğŸ“– è¯»å– package.json...',
          'âœ… æ–‡ä»¶è¯»å–æˆåŠŸ',
          'ğŸ“ å†™å…¥æ—¥å¿—æ–‡ä»¶...',
          'âœ… æ—¥å¿—å†™å…¥å®Œæˆ',
          'ğŸ“‚ åˆ›å»ºç›®å½• /uploads...',
          'âœ… ç›®å½•åˆ›å»ºæˆåŠŸ',
          'ğŸ” æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨...',
          'âœ… æ–‡ä»¶å­˜åœ¨æ€§æ£€æŸ¥å®Œæˆ'
        ];
        
        operations.forEach((op, index) => {
          setTimeout(() => {
            output.textContent += op + '\n';
          }, index * 600);
        });
      }

      function simulatePathOperation() {
        const output = document.getElementById('nodeOutput');
        output.textContent = 'ğŸ›¤ï¸ æ¨¡æ‹Ÿè·¯å¾„å¤„ç†æ“ä½œ...\n';
        
        const pathOps = [
          { desc: 'è§£ææ–‡ä»¶è·¯å¾„', input: '/home/user/project/index.js', result: 'dir: /home/user/project, file: index.js' },
          { desc: 'è·å–æ–‡ä»¶æ‰©å±•å', input: 'document.pdf', result: '.pdf' },
          { desc: 'è·¯å¾„æ‹¼æ¥', input: '["home", "user", "documents"]', result: 'home/user/documents' },
          { desc: 'è·å–ç»å¯¹è·¯å¾„', input: './src/app.js', result: '/project/src/app.js' }
        ];
        
        pathOps.forEach((op, index) => {
          setTimeout(() => {
            output.textContent += `${op.desc}:\n`;
            output.textContent += `  è¾“å…¥: ${op.input}\n`;
            output.textContent += `  ç»“æœ: ${op.result}\n\n`;
          }, index * 800);
        });
      }

      function simulateUrlParsing() {
        const output = document.getElementById('nodeOutput');
        output.textContent = 'ğŸ”— æ¨¡æ‹ŸURLè§£ææ“ä½œ...\n';
        
        const url = 'https://api.example.com/users?page=1&limit=10&sort=name';
        
        setTimeout(() => {
          output.textContent += `åŸå§‹URL: ${url}\n\n`;
          output.textContent += 'è§£æç»“æœ:\n';
          output.textContent += '  åè®®: https\n';
          output.textContent += '  ä¸»æœº: api.example.com\n';
          output.textContent += '  è·¯å¾„: /users\n';
          output.textContent += '  æŸ¥è¯¢å‚æ•°:\n';
          output.textContent += '    page: 1\n';
          output.textContent += '    limit: 10\n';
          output.textContent += '    sort: name\n';
        }, 500);
      }

      // NPMæ¼”ç¤ºå‡½æ•°
      function simulateNpmInit() {
        const output = document.getElementById('npmOutput');
        const structure = document.getElementById('projectStructure');
        
        output.textContent = 'ğŸ¯ æ‰§è¡Œ npm init -y...\n';
        
        setTimeout(() => {
          output.textContent += 'âœ… package.json å·²åˆ›å»º\n\n';
          output.textContent += 'package.json å†…å®¹:\n';
          output.textContent += '{\n';
          output.textContent += '  "name": "my-node-project",\n';
          output.textContent += '  "version": "1.0.0",\n';
          output.textContent += '  "description": "",\n';
          output.textContent += '  "main": "index.js",\n';
          output.textContent += '  "scripts": {\n';
          output.textContent += '    "test": "echo \\"Error: no test specified\\" && exit 1"\n';
          output.textContent += '  },\n';
          output.textContent += '  "keywords": [],\n';
          output.textContent += '  "author": "",\n';
          output.textContent += '  "license": "ISC"\n';
          output.textContent += '}\n';
          
          structure.innerHTML = `
<strong>é¡¹ç›®ç»“æ„:</strong>
my-node-project/
â”œâ”€â”€ <span class="file">package.json</span>
â””â”€â”€ <span class="file">index.js</span> (å¾…åˆ›å»º)
          `;
          structure.style.display = 'block';
        }, 1000);
      }

      function simulateNpmInstall() {
        const output = document.getElementById('npmOutput');
        const structure = document.getElementById('projectStructure');
        
        output.textContent = 'ğŸ“¥ æ‰§è¡Œ npm install express lodash...\n';
        
        const installSteps = [
          'ğŸ” è§£æä¾èµ–å…³ç³»...',
          'ğŸ“¦ ä¸‹è½½ express@4.18.2...',
          'ğŸ“¦ ä¸‹è½½ lodash@4.17.21...',
          'ğŸ“¦ ä¸‹è½½ç›¸å…³ä¾èµ–åŒ…...',
          'ğŸ”§ æ„å»ºä¾èµ–æ ‘...',
          'âœ… å®‰è£…å®Œæˆï¼'
        ];
        
        installSteps.forEach((step, index) => {
          setTimeout(() => {
            output.textContent += step + '\n';
            
            if (index === installSteps.length - 1) {
              output.textContent += '\nğŸ“Š å®‰è£…ç»Ÿè®¡:\n';
              output.textContent += '  æ–°å¢åŒ…: 57\n';
              output.textContent += '  æ€»å¤§å°: 12.3 MB\n';
              output.textContent += '  è€—æ—¶: 8.2s\n';
              
              structure.innerHTML = `
<strong>é¡¹ç›®ç»“æ„:</strong>
my-node-project/
â”œâ”€â”€ <span class="folder">node_modules/</span>
â”‚   â”œâ”€â”€ <span class="folder">express/</span>
â”‚   â”œâ”€â”€ <span class="folder">lodash/</span>
â”‚   â””â”€â”€ <span class="folder">... (å…¶ä»–ä¾èµ–)</span>
â”œâ”€â”€ <span class="file">package.json</span>
â”œâ”€â”€ <span class="file">package-lock.json</span>
â””â”€â”€ <span class="file">index.js</span>
              `;
              structure.style.display = 'block';
            }
          }, index * 600);
        });
      }

      function simulateNpmScripts() {
        const output = document.getElementById('npmOutput');
        output.textContent = 'âš¡ NPM Scripts æ¼”ç¤º...\n\n';
        
        const scripts = [
          { name: 'npm start', desc: 'å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨', cmd: 'node index.js' },
          { name: 'npm run dev', desc: 'å¯åŠ¨å¼€å‘æœåŠ¡å™¨', cmd: 'nodemon index.js' },
          { name: 'npm test', desc: 'è¿è¡Œæµ‹è¯•', cmd: 'jest' },
          { name: 'npm run build', desc: 'æ„å»ºé¡¹ç›®', cmd: 'webpack --mode production' }
        ];
        
        scripts.forEach((script, index) => {
          setTimeout(() => {
            output.textContent += `ğŸ”§ ${script.name}\n`;
            output.textContent += `   æè¿°: ${script.desc}\n`;
            output.textContent += `   å‘½ä»¤: ${script.cmd}\n\n`;
          }, index * 800);
        });
      }

      function simulatePackageInfo() {
        const output = document.getElementById('npmOutput');
        output.textContent = 'ğŸ“‹ æŸ¥çœ‹åŒ…ä¿¡æ¯...\n\n';
        
        setTimeout(() => {
          output.textContent += 'ğŸ“¦ express@4.18.2\n';
          output.textContent += '   æè¿°: Fast, unopinionated, minimalist web framework\n';
          output.textContent += '   ä¸»é¡µ: http://expressjs.com/\n';
          output.textContent += '   è®¸å¯è¯: MIT\n';
          output.textContent += '   ä¾èµ–: 30ä¸ªåŒ…\n';
          output.textContent += '   å¤§å°: 209 kB\n\n';
          
          output.textContent += 'ğŸ“¦ lodash@4.17.21\n';
          output.textContent += '   æè¿°: Lodash modular utilities\n';
          output.textContent += '   ä¸»é¡µ: https://lodash.com/\n';
          output.textContent += '   è®¸å¯è¯: MIT\n';
          output.textContent += '   ä¾èµ–: 0ä¸ªåŒ…\n';
          output.textContent += '   å¤§å°: 1.4 MB\n';
        }, 500);
      }

      // Expressæ¼”ç¤ºå‡½æ•°
      function simulateExpressApp() {
        const output = document.getElementById('expressOutput');
        output.textContent = 'ğŸš€ åˆ›å»ºExpressåº”ç”¨...\n';
        
        const steps = [
          'ğŸ“¦ å¯¼å…¥Expressæ¨¡å—...',
          'ğŸ—ï¸ åˆ›å»ºåº”ç”¨å®ä¾‹...',
          'ğŸ”§ é…ç½®ä¸­é—´ä»¶...',
          'ğŸ›¤ï¸ è®¾ç½®è·¯ç”±...',
          'ğŸŒ å¯åŠ¨æœåŠ¡å™¨...',
          'âœ… Expressåº”ç”¨å·²å¯åŠ¨åœ¨ http://localhost:3000'
        ];
        
        steps.forEach((step, index) => {
          setTimeout(() => {
            output.textContent += step + '\n';
          }, index * 600);
        });
      }

      function simulateExpressRoutes() {
        const output = document.getElementById('expressOutput');
        output.textContent = 'ğŸ›¤ï¸ Expressè·¯ç”±æ¼”ç¤º...\n\n';
        
        const routes = [
          { method: 'GET', path: '/', desc: 'é¦–é¡µè·¯ç”±' },
          { method: 'GET', path: '/api/users', desc: 'è·å–ç”¨æˆ·åˆ—è¡¨' },
          { method: 'GET', path: '/api/users/:id', desc: 'è·å–ç‰¹å®šç”¨æˆ·' },
          { method: 'POST', path: '/api/users', desc: 'åˆ›å»ºæ–°ç”¨æˆ·' },
          { method: 'PUT', path: '/api/users/:id', desc: 'æ›´æ–°ç”¨æˆ·ä¿¡æ¯' },
          { method: 'DELETE', path: '/api/users/:id', desc: 'åˆ é™¤ç”¨æˆ·' }
        ];
        
        routes.forEach((route, index) => {
          setTimeout(() => {
            output.textContent += `${route.method.padEnd(6)} ${route.path.padEnd(20)} - ${route.desc}\n`;
          }, index * 400);
        });
      }

      function simulateExpressMiddleware() {
        const output = document.getElementById('expressOutput');
        output.textContent = 'ğŸ”§ Expressä¸­é—´ä»¶æ¼”ç¤º...\n\n';
        
        const middlewares = [
          { name: 'express.json()', desc: 'è§£æJSONè¯·æ±‚ä½“' },
          { name: 'express.static()', desc: 'æä¾›é™æ€æ–‡ä»¶æœåŠ¡' },
          { name: 'morgan', desc: 'HTTPè¯·æ±‚æ—¥å¿—è®°å½•' },
          { name: 'helmet', desc: 'è®¾ç½®å®‰å…¨ç›¸å…³HTTPå¤´' },
          { name: 'cors', desc: 'å¤„ç†è·¨åŸŸè¯·æ±‚' },
          { name: 'compression', desc: 'Gzipå‹ç¼©å“åº”' }
        ];
        
        middlewares.forEach((middleware, index) => {
          setTimeout(() => {
            output.textContent += `ğŸ”§ ${middleware.name}\n`;
            output.textContent += `   åŠŸèƒ½: ${middleware.desc}\n\n`;
          }, index * 600);
        });
      }

      function simulateExpressAPI() {
        const output = document.getElementById('expressOutput');
        output.textContent = 'ğŸ“¡ Express APIæ¥å£æµ‹è¯•...\n\n';
        
        const apiTests = [
          { 
            method: 'GET', 
            url: '/api/users', 
            status: 200, 
            response: '[{"id":1,"name":"å¼ ä¸‰"},{"id":2,"name":"æå››"}]' 
          },
          { 
            method: 'GET', 
            url: '/api/users/1', 
            status: 200, 
            response: '{"id":1,"name":"å¼ ä¸‰","email":"zhangsan@example.com"}' 
          },
          { 
            method: 'POST', 
            url: '/api/users', 
            status: 201, 
            response: '{"message":"ç”¨æˆ·åˆ›å»ºæˆåŠŸ","id":3}' 
          },
          { 
            method: 'GET', 
            url: '/api/nonexistent', 
            status: 404, 
            response: '{"error":"é¡µé¢æœªæ‰¾åˆ°"}' 
          }
        ];
        
        apiTests.forEach((test, index) => {
          setTimeout(() => {
            const statusColor = test.status < 300 ? 'âœ…' : test.status < 400 ? 'âš ï¸' : 'âŒ';
            output.textContent += `${statusColor} ${test.method} ${test.url}\n`;
            output.textContent += `   çŠ¶æ€ç : ${test.status}\n`;
            output.textContent += `   å“åº”: ${test.response}\n\n`;
          }, index * 800);
        });
      }
    </script>
  </body>
</html>